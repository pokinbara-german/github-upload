{"version":3,"sources":["components/Profile/ProfileInfo/ProfileInfo.module.css","utils/fontHelpers.ts","Common/Preloader/Preloader.module.css","components/Header/AppHeader.module.css","Common/Post/Post.tsx","reducers/usersReducer.ts","Common/AddMessageForm/EmojiPicker/EmojiPicker.tsx","Common/AddMessageForm/AddMessageForm.tsx","Common/Post/LikesBlock/LikesBlock.tsx","Common/Post/PostActions/PostActions.tsx","Common/Counter/Counter.tsx","Hocs/withAuthRedirect.tsx","components/API/chat-api.ts","reducers/chatReducer.ts","components/Navbar/Navbar.module.css","Common/Routes.tsx","components/Profile/MyPosts/MyPosts.module.css","components/Login/Login.module.css","Common/FormComponents/FieldsComponentsFormik.tsx","reportWebVitals.js","assets/images/vk-rounded.svg","components/Navbar/Navbar.tsx","components/Profile/ProfileInfo/ProfileStatus.tsx","components/Profile/ProfileInfo/AdditionalInfo/ProfileContact/ProfileContact.tsx","components/Profile/ProfileInfo/AdditionalInfo/AdditionalInfo.tsx","components/Profile/ProfileInfo/AdditionalInfoForm/AdditionalInfoForm.tsx","components/Profile/ProfileInfo/ProfileAvatar/ProfileAvatar.tsx","assets/images/social-network-pattern-background.jpg","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx","reducers/authReducer.ts","components/Login/LoginForm/LoginForm.tsx","components/Login/Login.tsx","reducers/appReducer.ts","Pages/StartPage.tsx","assets/images/logo.svg","components/Header/AppHeader.tsx","components/NotFound.tsx","Common/GlobalAlert/GlobalAlert.tsx","App.tsx","redux/reduxStore.ts","index.tsx","utils/validators.ts","components/API/api.ts","utils/formikSetters.ts","reducers/profileReducer.ts","types.ts","Common/Selectors/Selectors.ts","reducers/dialogsReducer.ts","assets/images/user-male.png","assets/images/preloader-spinner.svg","Common/Preloader/Preloader.tsx","Common/Post/PostActions/PostActions.module.css"],"names":["module","exports","getFontsWithEmoji","theme","fontPool","typography","fontFamily","split","splice","join","Post","props","classes","makeStyles","createStyles","postsItem","padding","justifyContent","rightSided","postWrapper","display","margin","spacing","width","blockWidth","text","whiteSpace","overflowWrap","flexDirection","useStyles","avatarSmall","avatar","userMale","secondary","Fragment","action","postId","primaryLinked","to","getRouteNameById","routes","dialogs","id","userId","userName","alignItems","className","variant","profile","alt","src","primary","primaryLink","initialState","users","currentPage","pageSize","isUsersFetching","followingInProgress","filter","searchTerm","friend","mapUserFollowingStatus","userObject","status","followed","userActions","type","isFetching","getUsers","dispatch","getState","a","usersPage","Api","Users","data","items","processFollowUnfollow","apiMethod","actionCreator","follow","unfollow","usersReducer","state","map","user","EmojiPicker","React","useState","anchorElement","setAnchorElement","isPopoverOpen","Boolean","IconButton","onClick","event","currentTarget","Popover","anchorOrigin","vertical","horizontal","transformOrigin","open","anchorEl","onClose","onSelect","onEmojiClick","set","AddMessageForm","minLength","minLengthCreator","minTextLength","maxLength","maxTextLength","maxLengthCreator","undefined","validatorsList","required","push","newPostForm","maxWidth","newPostFormInputWrapper","flexGrow","stretched","useDispatch","formik","useFormik","initialValues","newMessage","onSubmit","values","setSubmitting","resetForm","sendMessage","handleSubmit","value","Tooltip","title","aria-label","placement","arrow","createField","FormikField","validatorCreator","multiline","emojiObject","setFieldValue","native","Button","color","disabled","isBlocked","isSubmitting","dirty","isValid","buttonText","likeWrapper","LikesBlock","iconSize","substr","profileActions","addLike","likeCount","fontSize","PostActions","onlyText","Typography","component","textWithOk","styles","textWithIconWrapper","style","icon","textWithWait","textWithLikes","likes","Counter","useTheme","position","inCorner","top","right","label","count","size","withAuthRedirect","Component","connect","isAuth","auth","restProps","subscribers","ws","closeHandler","console","log","notifyConnectionChanged","setTimeout","createChanel","messageHandler","newMessages","JSON","parse","forEach","message","nanoid","subscriber","openHandler","cleanUpWs","removeEventListener","close","WebSocket","addEventListener","chatApi","eventName","callback","send","messages","isConnected","chatActions","payload","_messageHandler","messageHandlerCreator","_connectionHandler","connectionHandlerCreator","startMessagesListening","stopMessagesListening","chatReducer","slice","PersonOutlinedIcon","EmailOutlinedIcon","FeaturedPlayListOutlinedIcon","LibraryMusicOutlinedIcon","MessageOutlinedIcon","PeopleAltOutlinedIcon","SettingsOutlinedIcon","getRouteIdByName","routeName","routeId","Object","keys","find","route","FormControl","field","children","meta","form","getFieldMeta","name","hasError","touched","error","helperText","elementProps","isValidElement","cloneElement","root","FormikCheckbox","formikSelect","memo","options","option","key","placeholder","validate","_path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","MenuItem","selected","renderLink","useMemo","forwardRef","itemProps","ref","ListItem","button","ListItemIcon","ListItemText","Navbar","currentRoute","useHistory","location","pathname","newMessagesCount","useSelector","getNewMessagesCountSelector","selectedIndex","setSelectedIndex","MenuList","currentRouteId","createElement","drawerContainer","List","ProfileStatus","statusInput","statusText","flexBasis","divider","isStatusEditing","setStatusEditing","setStatus","useEffect","toggleEditing","newValue","updateStatus","statusFetching","Preloader","notCentered","isOwner","TextField","autoFocus","onBlur","onChange","target","statusDiv","Divider","_extends","assign","i","arguments","length","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgVkRounded","_ref","svgRef","titleId","xmlns","height","viewBox","d","ForwardRef","ProfileContact","contactTitle","contactInfo","Icon","SvgIcon","VkRounded","rel","href","additionalInfo","marginLeft","marginRight","additionalInfoItem","marginTop","wrapped","flexWrap","contacts","AdditionalInfo","ContactsList","contactValue","isNeedContacts","every","contact","aboutMe","lookingForAJob","lookingForAJobDescription","setEditMode","additionalInfoForm","buttonsWrapper","additionalInfoRow","textAlign","infoWrapper","errorText","errorsWrapper","FormBasicInfo","checked","setChecked","Card","triggerCheckbox","FormContactsInfo","AdditionalInfoForm","normalizeContacts","enableReinitialize","formData","setFieldError","hasApiErrors","saveProfile","submitCount","onChancel","avatarWrapper","large","input","ProfileAvatar","history","profileAvatarLarge","largePhoto","AddDialogButton","startRefreshDialog","Avatar","AvatarUploadButton","accept","files","savePhoto","htmlFor","startIcon","wallpaper","backgroundImage","ProfileBackground","backgroundSize","profileDescriptionWrapper","ProfileInfo","isEditMode","profileDescription","photos","fullName","postsList","backgroundColor","palette","background","paper","postsTitle","MyPosts","posts","postsData","post","postBlock","sendPost","MyPostsContainer","profilePage","small","login","Profile","ProfileContainer","getProfile","parseInt","match","params","getStatus","getProfileData","prevProps","prevState","snapshot","mapDispatchToProps","withRouter","email","captchaUrl","authActions","url","getAuth","Auth","Me","getCaptcha","Security","authReducer","maxLength30","loginForm","loginInput","alignSelf","marginBottom","LoginForm","password","rememberMe","captcha","errorCallback","Login","resultCode","captchaResultCodeType","captchaRequired","checkboxWrapper","autoComplete","loginPage","getIsAuthSelector","getCaptchaUrlSelector","initDone","appActions","StartPage","loginBlock","subtitle1","appBar","zIndex","drawer","headerContentWrapper","AppHeader","getLoginSelector","AppBar","Toolbar","headerLogo","logo","Logout","loginLink","NotFound","GlobalAlert","Snackbar","isOpen","reason","setNotificationOpen","autoHideDuration","TransitionComponent","Slide","Settings","lazy","Music","News","UsersContainer","DialogsContainer","ChatPage","breakpoints","down","drawerPaper","overflow","content","Content","fallback","exact","path","news","music","settings","chat","isInitDone","app","makeInit","Promise","all","getInfoAfterLogin","getNewMessagesCount","isNotificationOpen","notificationText","setNotificationText","catchGenericError","response","window","Drawer","rootReducer","combineReducers","profileReducer","dialogsPage","dialogsReducer","appReducer","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById","validators","validator","result","defaultApi","axios","create","withCredentials","baseURL","headers","get","page","term","delete","resultCodesType","Success","put","file","FormData","append","resolve","reject","Dialogs","getDialogsList","getMessagesList","body","emptyErrorCallback","emptyStatusCallback","setErrors","formikSetErrors","formikSetStatus","subkey","errorTextRaw","rawError","toLowerCase","substring","newPost","deletePost","setProfile","updateProfile","toggleStatusFetching","savePhotoSuccess","alert","statusCallback","replace","getUsersSelector","getCurrentPageSelector","getPageSizeSelector","getIsUsersFetchingSelector","getFollowingInProgressSelector","getUsersFilterSelector","getOwnerIdSelector","getChatMessages","getIsChatConnectedSelector","getDialogsMessagesSelector","messageList","getDialogsUserListSelector","userList","currentChatId","dialogsActions","messageSent","dialogsListReceived","list","messagesListReceived","chatChanged","chatId","newMessagesCountReceived","dialogReducer","preloaderWrapper","preloader"],"mappings":"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","file":"static/js/main.75027bfb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileDescription\":\"ProfileInfo_profileDescription__1ViSc\",\"statusDiv\":\"ProfileInfo_statusDiv__14SC_\"};","import {Theme} from '@material-ui/core/styles';\n\n/**\n * Returns fontFamily string.\n * @param {Theme} theme - Material-UI theme\n */\nexport function getFontsWithEmoji(theme: Theme) {\n    let fontPool = theme.typography.fontFamily?.split(',');\n    fontPool?.splice(1, 0, \"Twemoji Mozilla\");\n    return fontPool?.join(',');\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloaderWrapper\":\"Preloader_preloaderWrapper__1-vJZ\",\"preloader\":\"Preloader_preloader__1fZTW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerLogo\":\"AppHeader_headerLogo__1q3ko\",\"loginLink\":\"AppHeader_loginLink__1Epif\"};","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\nimport React from 'react';\nimport userMale from \"../../assets/images/user-male.png\";\nimport {stringOrNull} from '../../types';\nimport Avatar from '@material-ui/core/Avatar';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Card from '@material-ui/core/Card';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core';\nimport {NavLink} from 'react-router-dom';\nimport {getRouteNameById, routes} from '../Routes';\nimport {getFontsWithEmoji} from '../../utils/fontHelpers';\n\ntype postPropsType = {\n    postId: string,\n    action?: React.ReactElement,\n    avatar: stringOrNull,\n    userName: stringOrNull,\n    userId?: number,\n    blockWidth?: string,\n    rightSided?: boolean,\n    primaryLink?: boolean,\n}\n\n/**\n * Unified post block with avatar, title, text and optional likes-block.\n * @param {postPropsType} props - props object\n * @param {string} props.postId - post ID as string\n * @param {React.ReactElement=} props.action - post text\n * @param {string|null} props.avatar - link to avatar image\n * @param {string|null} props.userName - text for title\n * @param {number=} props.userId - if exist, will append to avatar navlink\n * @param {string=} props.blockWidth - sets max-width of block (CSS value, i.e. \"5px\")\n * @param {boolean=} props.primaryLink - if true, title text will anchor\n * @constructor\n */\nconst Post: React.FC<postPropsType> = (props) => {\n    const useStyles = makeStyles((theme: Theme) =>\n        createStyles({\n            postsItem: {\n                padding: 0,\n                justifyContent: props.rightSided ? 'end' : 'start'\n            },\n            postWrapper: {\n                display: 'flex',\n                margin: theme.spacing(1),\n                width: props.blockWidth || 'max-content',\n                padding: theme.spacing(1, 2)\n            },\n            text: {\n                whiteSpace: 'pre-line',\n                overflowWrap: 'break-word',\n                display: 'flex',\n                justifyContent: 'center',\n                flexDirection: 'column',\n                '& > p > span': {\n                    fontFamily: getFontsWithEmoji(theme)\n                },\n            }\n        }),\n    );\n\n    const classes = useStyles();\n    let avatarSmall = props.avatar || userMale;\n\n    const secondary = [\n        <React.Fragment key={props.postId}>\n            {props.action}\n        </React.Fragment>\n    ];\n\n    const primaryLinked = <NavLink to={`/${getRouteNameById(routes.dialogs.id)}/${props.userId}`}>\n                              {props.userName}\n                          </NavLink>;\n\n    return(\n        <ListItem alignItems='flex-start' className={classes.postsItem}>\n            <Card variant={'outlined'} className={classes.postWrapper}>\n                <ListItemAvatar>\n                    {!!props.userId\n                        ? <NavLink to={`/${getRouteNameById(routes.profile.id)}/${props.userId}`}>\n                            <Avatar alt='ava' src={avatarSmall} />\n                          </NavLink>\n                        : <Avatar alt='ava' src={avatarSmall} />\n                    }\n                </ListItemAvatar>\n                <ListItemText className={classes.text}\n                              primary={!!props.primaryLink ? primaryLinked : props.userName}\n                              secondary={secondary}\n                />\n            </Card>\n        </ListItem>\n    );\n};\n\nexport default Post;","import {Api} from '../components/API/api';\nimport {baseThunkType, arrayOfNumbers, usersType, stringOrNull} from '../types';\nimport {inferActionsType} from '../redux/reduxStore';\nimport {Dispatch} from 'redux';\n\nexport type initialStateType = {\n    users: Array<usersType>,\n    currentPage: number,\n    pageSize: number,\n    isUsersFetching: boolean,\n    followingInProgress: arrayOfNumbers,\n    filter: filterType\n}\n\nexport type filterType = {\n    searchTerm: stringOrNull,\n    friend: null | boolean\n}\ntype actionsType = inferActionsType<typeof userActions>;\ntype thunkType = baseThunkType<actionsType>;\n\ntype apiMethodType = typeof Api.Users.follow | typeof Api.Users.unfollow;\n\nconst initialState: initialStateType = {\n    users: [],\n    currentPage: 0,\n    pageSize: 12,\n    isUsersFetching: false,\n    followingInProgress: [],\n    filter: {\n        searchTerm: null,\n        friend: null\n    }\n};\n\nfunction mapUserFollowingStatus(userObject: usersType, userId: number, status: boolean) {\n        if (userObject.id === userId) {\n            return {...userObject, followed: status}\n        }\n        return userObject;\n}\n\nconst usersReducer = (state = initialState, action: actionsType): initialStateType => {\n    switch (action.type) {\n        case 'SN/USERS/FOLLOW':\n            return {\n                ...state,\n                users: state.users.map(user => mapUserFollowingStatus(user, action.userId, true))\n            }\n        case 'SN/USERS/UNFOLLOW':\n            return {\n                ...state,\n                users: state.users.map(user => mapUserFollowingStatus(user, action.userId, false))\n            }\n        case 'SN/USERS/ZERO_NEXT_PAGE':\n            return {...state, currentPage: 0};\n        case 'SN/USERS/SET_SEARCH_TERM':\n            return {...state, filter: {...action.filter}, users: []};\n        case 'SN/USERS/SET_USERS':\n            return {...state, users: [...state.users, ...action.users]}\n        case 'SN/USERS/NEXT_PAGE':\n            return {...state, currentPage: ++state.currentPage}\n        case 'SN/USERS/UPDATE_IS_USERS_FETCHING':\n            return {...state, isUsersFetching: action.isUsersFetching}\n        case 'SN/USERS/UPDATE_IS_FOLLOWING_FETCHING':\n            return {\n                ...state,\n                followingInProgress:\n                    action.isFetching\n                        ? [...state.followingInProgress, action.userId]\n                        : state.followingInProgress.filter(id => id !== action.userId)\n            }\n        default:\n            return state;\n    }\n}\n\nexport const userActions = {\n    followUser: (userId: number) => ({type: 'SN/USERS/FOLLOW', userId} as const),\n    unfollowUser: (userId: number) => ({type: 'SN/USERS/UNFOLLOW', userId} as const),\n    zeroNextPage: () => ({type: 'SN/USERS/ZERO_NEXT_PAGE'} as const),\n    setSearchFilter: (filter: filterType) => ({type: 'SN/USERS/SET_SEARCH_TERM', filter} as const),\n    setUsers: (users: Array<usersType>) => ({type: 'SN/USERS/SET_USERS', users} as const),\n    setNextPage: () => ({type: 'SN/USERS/NEXT_PAGE'} as const),\n    updateUsersFetching: (isUsersFetching: boolean) => ({\n        type: 'SN/USERS/UPDATE_IS_USERS_FETCHING',\n        isUsersFetching\n    } as const),\n    updateFollowingFetching: (isFetching: boolean, userId: number) => ({\n        type: 'SN/USERS/UPDATE_IS_FOLLOWING_FETCHING',\n        isFetching,\n        userId\n    } as const)\n}\n\nexport const getUsers = (pageSize: number, currentPage: number, filter: filterType): thunkType => {\n    return async (dispatch, getState) => {\n        dispatch(userActions.updateUsersFetching(true));\n        if (filter !== getState().usersPage.filter) {\n            dispatch(userActions.setSearchFilter(filter));\n            dispatch(userActions.zeroNextPage());\n        }\n\n        //TODO: хранить currentPage в стейте и оттуда же доставать\n        let data = await Api.Users.getUsers(pageSize, currentPage, filter);\n\n        dispatch(userActions.updateUsersFetching(false));\n\n        if (data === null) {\n            return;\n        }\n\n        dispatch(userActions.setUsers(data.items));\n        dispatch(userActions.setNextPage());\n    }\n}\n\nconst processFollowUnfollow = async (\n    userId: number,\n    dispatch: Dispatch<actionsType>,\n    apiMethod: apiMethodType,\n    actionCreator: (userId: number) => actionsType\n) => {\n    dispatch(userActions.updateFollowingFetching(true, userId));\n    let isSuccessful = await apiMethod(userId);\n\n    if (isSuccessful) {\n        dispatch(actionCreator(userId));\n    }\n\n    dispatch(userActions.updateFollowingFetching(false, userId));\n}\n\nexport const follow = (userId: number): thunkType => {\n    return async (dispatch) => {\n        await processFollowUnfollow(userId, dispatch, Api.Users.follow, userActions.followUser);\n    }\n}\n\nexport const unfollow = (userId: number): thunkType => {\n    return async (dispatch) => {\n        await processFollowUnfollow(userId, dispatch, Api.Users.unfollow, userActions.unfollowUser);\n    }\n}\n\nexport default usersReducer;","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport EmojiEmotionsOutlinedIcon from '@material-ui/icons/EmojiEmotionsOutlined';\nimport Popover from '@material-ui/core/Popover';\nimport 'emoji-mart/css/emoji-mart.css'\nimport {BaseEmoji, Picker} from 'emoji-mart'\n\ntype emojiPickerPropsType = {\n    onEmojiClick: (emojiObject:  BaseEmoji) => void\n}\n\n/**\n * Returns IconButton with emoji picker in popup.\n * @param {emojiPickerPropsType} props - props object\n * @param {function(emojiObject: BaseEmoji):void} props.onEmojiClick - function which will set picked emoji\n * @constructor\n */\nexport const EmojiPicker: React.FC<emojiPickerPropsType> = (props) => {\n    const [anchorElement, setAnchorElement] = React.useState<HTMLButtonElement | null>(null);\n\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n        setAnchorElement(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorElement(null);\n    };\n\n    const isPopoverOpen = Boolean(anchorElement);\n\n    return (\n        <React.Fragment>\n            <IconButton onClick={handleClick}>\n                <EmojiEmotionsOutlinedIcon/>\n            </IconButton>\n            <Popover\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'right',\n                }}\n                transformOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                open={isPopoverOpen}\n                anchorEl={anchorElement}\n                onClose={handleClose}\n            >\n                <Picker onSelect={props.onEmojiClick}\n                        set='apple'\n                />\n            </Popover>\n        </React.Fragment>\n    );\n}","import React from 'react';\nimport {FormikHelpers, FormikProvider, useFormik} from 'formik';\nimport {createField, FormikField} from '../FormComponents/FieldsComponentsFormik';\nimport {maxLengthCreator, minLengthCreator, required, validatorCreator} from '../../utils/validators';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport {useDispatch} from 'react-redux';\nimport {EmojiPicker} from './EmojiPicker/EmojiPicker';\nimport {BaseEmoji} from 'emoji-mart';\n\ntype propsType = {\n    blockWidth?: string,\n    buttonText: string,\n    minTextLength: number,\n    maxTextLength?: number,\n    isBlocked?: boolean,\n    sendMessage: (text: string) => void\n};\n\ntype formDataType = {\n    newMessage: string\n}\n\ntype fieldNamesType = keyof formDataType;\n\n/**\n * Returns form for adding new message with one multiline input and one button.\n * @param {propsType} props - props object.\n * @param {string=} props.blockWidth - width of form (optional param, 'inherit' by default)\n * @param {string} props.buttonText - text on button\n * @param {number} props.minTextLength - min length of input value\n * @param {number=} props.maxTextLength - max length of input value (optional)\n * @param {boolean} props.isBlocked - is need to disable button\n * @param {function(text: string): void} props.sendMessage - callback for set new message\n * @constructor\n */\nexport const AddMessageForm: React.FC<propsType> = (props) => {\n    let minLength = minLengthCreator(props.minTextLength);\n    let maxLength = props.maxTextLength ? maxLengthCreator(props.maxTextLength) : undefined;\n\n    let validatorsList = [required, minLength];\n\n    if (maxLength !== undefined) {\n        validatorsList.push(maxLength);\n    }\n\n    const useStyles = makeStyles((theme: Theme) =>\n        createStyles({\n            newPostForm: {\n                display: 'flex',\n                flexDirection: 'column',\n                maxWidth: props.blockWidth || 'inherit',\n                '& > div': {\n                    display: 'flex',\n                    margin: theme.spacing(1),\n                },\n            },\n            newPostFormInputWrapper: {\n                display: 'flex',\n                '& > div': {\n                    display: 'flex',\n                    flexGrow: 1,\n                    margin: theme.spacing(1),\n                },\n            },\n            stretched: {\n                flexGrow: 1,\n            }\n        }),\n    );\n\n    const dispatch = useDispatch();\n    const classes = useStyles();\n\n    function onSubmit(values: formDataType, {setSubmitting, resetForm}: FormikHelpers<formDataType>) {\n        dispatch(props.sendMessage(values.newMessage));\n        setSubmitting(false);\n        resetForm();\n    }\n\n    const formik = useFormik({\n        initialValues: {newMessage: ''},\n        onSubmit,\n    });\n\n    const onEmojiClick = (emojiObject: BaseEmoji) => {\n        formik.setFieldValue('newMessage', formik.values.newMessage + emojiObject.native);\n    };\n\n    return (\n        <form onSubmit={formik.handleSubmit} className={classes.newPostForm}>\n            <div className={classes.newPostFormInputWrapper}>\n                <FormikProvider value={formik}>\n                    <Tooltip title={'You can type multiline. Just hit enter.'} aria-label='Hint' placement=\"right\" arrow>\n                        {createField<fieldNamesType>(\n                            classes.stretched,\n                            'Type something',\n                            'newMessage',\n                            FormikField,\n                            validatorCreator(validatorsList),\n                            {multiline: true}\n                        )}\n                    </Tooltip>\n                </FormikProvider>\n                <EmojiPicker onEmojiClick={onEmojiClick}/>\n            </div>\n            <div>\n                <Button variant='contained'\n                        color='primary'\n                        type='submit'\n                        disabled={!!props.isBlocked || formik.isSubmitting || !formik.dirty || !formik.isValid}\n                >\n                    {props.buttonText}\n                </Button>\n            </div>\n        </form>\n    );\n}","import React from 'react';\nimport {useDispatch} from 'react-redux';\nimport {profileActions} from '../../../reducers/profileReducer';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\nimport ThumbUpOutlinedIcon from '@material-ui/icons/ThumbUpOutlined';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core';\n\ntype likesBlockPropsType = {\n    postId: string,\n    likeCount: number\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        likeWrapper: {\n            display: 'flex',\n            '& > *': {\n                margin: theme.spacing(1),\n            },\n        }\n    }),\n);\n\n/**\n * Returns counter for post likes with tooltip and button to add like.\n * @param {likesBlockPropsType} props\n * @constructor\n */\nexport const LikesBlock: React.FC<likesBlockPropsType> = (props) => {\n    const iconSize = 'small';\n    const dispatch = useDispatch();\n    const classes = useStyles();\n\n    /**\n     * Add like to post\n     * @param {React.MouseEvent<HTMLSpanElement>} event - sets automatically, not need to put it\n     */\n    const likeHandler = (event: React.MouseEvent<HTMLSpanElement>) => {\n        let targetId = event.currentTarget.id;\n        let postId = targetId.substr(5);\n\n        if (postId) {\n            dispatch(profileActions.addLike(postId));\n        }\n    };\n\n    return (\n        <span onClick={likeHandler} id={'post-' + props.postId} className={classes.likeWrapper}>\n            <Tooltip arrow title='Like' aria-label='like'>\n                {props.likeCount ? <ThumbUpIcon fontSize={iconSize}/> : <ThumbUpOutlinedIcon fontSize={iconSize}/>}\n            </Tooltip>\n            <span>{props.likeCount}</span>\n        </span>\n    );\n};","import React from 'react';\nimport styles from './PostActions.module.css'\nimport Typography from '@material-ui/core/Typography';\nimport CheckOutlinedIcon from '@material-ui/icons/CheckOutlined';\nimport ScheduleOutlinedIcon from '@material-ui/icons/ScheduleOutlined';\nimport {LikesBlock} from '../LikesBlock/LikesBlock';\n\nexport const PostActions = {\n    onlyText(text: string) {\n        return <Typography component='span'>{text}</Typography>;\n    },\n    textWithOk(text: string) {\n        return (\n            <div className={styles.textWithIconWrapper}>\n                <Typography component='span'>{text}</Typography>\n                <CheckOutlinedIcon style={{fontSize: '0.9rem'}} color='primary' className={styles.icon}/>\n            </div>\n        );\n    },\n    textWithWait(text: string) {\n        return (\n            <div className={styles.textWithIconWrapper}>\n                <Typography component='span'>{text}</Typography>\n                <ScheduleOutlinedIcon style={{fontSize: '0.9rem'}} color='disabled' className={styles.icon}/>\n            </div>\n        );\n    },\n    textWithLikes(text: string, postId: string, likes: number) {\n        return (\n            <>\n                <Typography component='span'>{text}</Typography>\n                <LikesBlock postId={postId} likeCount={likes}/>\n            </>\n        );\n    }\n}","import React from 'react';\nimport {useTheme} from '@material-ui/core';\nimport Chip from '@material-ui/core/Chip';\n\ntype counterPropsType = {\n    count: number,\n    inCorner?: boolean\n}\n\n/**\n * Returns small numeric label.\n * @param {counterPropsType} props - props object\n * @param {number} props.count - number which will be show.\n * @param {boolean=} props.isInCorner - if true, will be positioned in top-right corner (optional).\n * @constructor\n */\nexport const Counter: React.FC<counterPropsType> = (props) => {\n    const theme = useTheme();\n    return (\n        <Chip style={{\n                margin: theme.spacing(0, 1),\n                position: props.inCorner ? 'absolute' : undefined,\n                top: props.inCorner ? theme.spacing(1) : undefined,\n                right: props.inCorner ? theme.spacing(0) : undefined\n                }}\n              color='primary'\n              label={props.count}\n              size='small'/>\n    );\n}","import React from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport {appStateType} from '../redux/reduxStore';\n\ntype mapStatePropsType = {\n    isAuth: boolean\n}\n\nfunction withAuthRedirect<WCP> (Component: React.ComponentType<WCP>) {\n    let mapStateToProps = (state: appStateType) => {\n        return (\n            {isAuth: state.auth.isAuth}\n        );\n    };\n\n    const AuthRedirect: React.FC<mapStatePropsType & {}> = (props) => {\n        let {isAuth, ...restProps} = props;\n\n        if (!isAuth) {\n            return <Redirect to='/login'/>\n        }\n\n        return <Component {...restProps as WCP}/>;\n    }\n\n    return connect(mapStateToProps)(AuthRedirect);\n}\n\nexport default withAuthRedirect;","import {nanoid} from 'nanoid';\n\ntype ApiMessageType = {\n    message: string,\n    photo: string,\n    userId: number,\n    userName: string\n};\n\nexport type eventNamesType = 'message-received' | 'connection-changed';\n\nexport interface messageType extends ApiMessageType {\n    id: string\n}\n\ntype messageReceivedSubscriberType = (messages: Array<messageType>) => void;\ntype connectionChangedSubscriberType = (status: boolean) => void;\ntype subscribersType = {\n    'message-received': Array<messageReceivedSubscriberType>,\n    'connection-changed': Array<connectionChangedSubscriberType>\n}\n\n/** @constant {string} URL to websocket end-point */\nconst BASE_URL = 'wss://social-network.samuraijs.com/handlers/ChatHandler.ashx';\n\nlet subscribers: subscribersType = {\n    'message-received': [],\n    'connection-changed': []\n};\n\nlet ws: WebSocket | null = null;\n\nfunction closeHandler() {\n    console.log('CLOSE WS');\n    notifyConnectionChanged(false);\n    setTimeout(createChanel, 3000);\n}\n\nfunction messageHandler(event: MessageEvent) {\n    const newMessages = JSON.parse(event.data);\n    newMessages.forEach((message: messageType) => message.id = nanoid());\n    subscribers['message-received'].forEach(subscriber => subscriber(newMessages));\n}\n\n/**\n * Notify about connection is opened\n */\nfunction openHandler() {\n    notifyConnectionChanged(true);\n}\n\n/**\n * Clean WebSocket object from listeners and closes connection.\n */\nfunction cleanUpWs() {\n    ws?.removeEventListener('close', closeHandler);\n    ws?.removeEventListener('message', messageHandler);\n    ws?.removeEventListener('open', openHandler);\n    ws?.close();\n}\n\nfunction notifyConnectionChanged(status: boolean) {\n    subscribers['connection-changed'].forEach(subscriber => subscriber(status));\n}\n\nfunction createChanel() {\n    cleanUpWs();\n    ws = new WebSocket(BASE_URL);\n    notifyConnectionChanged(false);\n    ws.addEventListener('close', closeHandler);\n    ws.addEventListener('message', messageHandler);\n    ws.addEventListener('open', openHandler);\n}\n\nexport const chatApi = {\n    //TODO: refactor this\n    subscribe(eventName: eventNamesType, callback: messageReceivedSubscriberType | connectionChangedSubscriberType) {\n        // @ts-ignore\n        subscribers[eventName].push(callback);\n        // @ts-ignore\n        return () => subscribers[eventName] = subscribers[eventName].filter(subscriber => subscriber !== callback);\n    },\n    //TODO: refactor this too\n    unsubscribe(eventName: eventNamesType, callback: messageReceivedSubscriberType | connectionChangedSubscriberType) {\n        // @ts-ignore\n        subscribers[eventName] = subscribers[eventName].filter(subscriber => subscriber !== callback);\n    },\n    sendMessage(message: string) {\n        ws?.send(message);\n    },\n    connect() {\n        createChanel();\n    },\n    disconnect() {\n        cleanUpWs();\n        subscribers['message-received'] = [];\n        subscribers['connection-changed'] = [];\n    }\n}","import {inferActionsType} from '../redux/reduxStore';\nimport {baseThunkType} from '../types';\nimport {chatApi, messageType} from '../components/API/chat-api';\nimport {Dispatch} from 'redux';\n\n/** @constant {number} Maximal number of posts in chat */\nconst MAX_CHAT_MESSAGES = 100;\n\nexport type initialStateType = {\n    messages: Array<messageType>,\n    isConnected: boolean\n};\n\ntype actionsType = inferActionsType<typeof chatActions>;\ntype thunkType = baseThunkType<actionsType, void>;\n\nconst initialState: initialStateType = {\n    messages: [],\n    isConnected: false\n};\n\nconst chatReducer = (state = initialState, action: actionsType): initialStateType => {\n    switch (action.type) {\n\n        case 'SN/CHAT/MESSAGES_RECEIVED':\n            return {\n                ...state,\n                messages: [...state.messages, ...action.payload].slice(-MAX_CHAT_MESSAGES)\n            };\n        case 'SN/CHAT/CHAT_CLEARED':\n            return {\n                ...state,\n                messages: []\n            };\n        case 'SN/CHAT/CONNECTION_CHANGED':\n            return {\n                ...state,\n                isConnected: action.payload\n            };\n        default:\n            return state;\n    }\n}\n\nexport const chatActions = {\n    messagesReceived: (messages: Array<messageType>) => ({type: 'SN/CHAT/MESSAGES_RECEIVED', payload: messages} as const),\n    chatCleared: () => ({type: 'SN/CHAT/CHAT_CLEARED'} as const),\n    connectionChanged: (isConnected: boolean) => ({type: 'SN/CHAT/CONNECTION_CHANGED', payload: isConnected} as const)\n}\n\nlet _messageHandler: ((messages: Array<messageType>) => void) | null = null;\n\nlet messageHandlerCreator = (dispatch: Dispatch) => {\n    if (_messageHandler === null) {\n        _messageHandler = (messages) => {\n            dispatch(chatActions.messagesReceived(messages));\n        }\n    }\n\n    return _messageHandler;\n};\n\nlet _connectionHandler: ((status: boolean) => void) | null = null;\n\nlet connectionHandlerCreator = (dispatch: Dispatch) => {\n    if (_connectionHandler === null) {\n        _connectionHandler = (status) => {\n            dispatch(chatActions.connectionChanged(status));\n        }\n    }\n\n    return _connectionHandler;\n};\n\nexport const startMessagesListening = (): thunkType => (dispatch) => {\n    chatApi.connect();\n    chatApi.subscribe('message-received', messageHandlerCreator(dispatch));\n    chatApi.subscribe('connection-changed', connectionHandlerCreator(dispatch));\n}\n\nexport const stopMessagesListening = (): thunkType => (dispatch) => {\n    chatApi.unsubscribe('message-received', messageHandlerCreator(dispatch));\n    chatApi.unsubscribe('connection-changed', connectionHandlerCreator(dispatch));\n    dispatch(chatActions.chatCleared());\n    chatApi.disconnect();\n}\n\nexport const sendMessage = (message: string): thunkType => () => {\n    chatApi.sendMessage(message);\n}\n\nexport default chatReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"drawerContainer\":\"Navbar_drawerContainer__1aacK\"};","import PersonOutlinedIcon from '@material-ui/icons/PersonOutlined';\nimport EmailOutlinedIcon from '@material-ui/icons/EmailOutlined';\nimport FeaturedPlayListOutlinedIcon from '@material-ui/icons/FeaturedPlayListOutlined';\nimport LibraryMusicOutlinedIcon from '@material-ui/icons/LibraryMusicOutlined';\nimport MessageOutlinedIcon from '@material-ui/icons/MessageOutlined';\nimport PeopleAltOutlinedIcon from '@material-ui/icons/PeopleAltOutlined';\nimport SettingsOutlinedIcon from '@material-ui/icons/SettingsOutlined';\nimport {OverridableComponent} from '@material-ui/core/OverridableComponent';\nimport {SvgIconTypeMap} from '@material-ui/core';\n\nexport type routesVariants = 'profile' | 'dialogs' | 'news' | 'music' | 'chat' | 'users' | 'settings';\n\nexport type routesType = {\n    [key in routesVariants]: {\n        id: number,\n        title: string,\n        icon: OverridableComponent<SvgIconTypeMap<{}, \"svg\">>\n    };\n};\n\n/**\n * Object for pages routines in app.\n */\nexport const routes: routesType = {\n    'profile': {id: 1, title: 'Profile', icon: PersonOutlinedIcon},\n    'dialogs': {id: 2, title: 'Dialogs', icon: EmailOutlinedIcon},\n    'news': {id: 3, title: 'News', icon: FeaturedPlayListOutlinedIcon},\n    'music': {id: 4, title: 'Music', icon: LibraryMusicOutlinedIcon},\n    'chat': {id: 5, title: 'Chat', icon: MessageOutlinedIcon},\n    'users': {id: 6, title: 'Users', icon: PeopleAltOutlinedIcon},\n    'settings': {id: 7, title: 'Settings', icon: SettingsOutlinedIcon},\n}\n\n/**\n * Gets route ID.\n * @param {routesVariants} routeName route as string\n */\nexport const getRouteIdByName = (routeName: routesVariants) => {\n    return routeName in routes ? routes[routeName].id : 0;\n}\n\n/**\n * Gets route name as string.\n * @param {number} routeId route ID\n */\nexport const getRouteNameById = (routeId: number) => {\n    return Object.keys(routes).find(route => routes[route as routesVariants].id === routeId);\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postBlock\":\"MyPosts_postBlock__3b6E0\",\"posts\":\"MyPosts_posts__3tZ1c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkboxWrapper\":\"Login_checkboxWrapper__7_o-w\"};","import React from \"react\";\nimport {Field, FieldProps} from \"formik\";\nimport {validatorType} from \"../../utils/validators\";\nimport TextField from '@material-ui/core/TextField';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {createStyles, makeStyles} from '@material-ui/core';\nimport {getFontsWithEmoji} from '../../utils/fontHelpers';\n\ntype elementPropsType = {\n    error?: boolean,\n    helperText?: string\n};\n\n/**\n * Constructs wrapped component for formik field.\n * @param {Object} field\n * @param {Object | Array} children - React children\n * @param {Object} props - any needed props\n * @constructor\n */\nconst FormControl: React.FC<FieldProps> = ({field, children, ...props}) => {\n    const meta = props.form.getFieldMeta(field.name);\n    const hasError = meta.touched && meta.error;\n    const helperText = meta.error || undefined;\n\n    const elementProps: typeof field & typeof props & elementPropsType = {\n        ...field,\n        ...props\n    };\n\n    if (hasError) elementProps.error = !!hasError;\n    if (helperText) elementProps.helperText = helperText;\n\n    return (\n        <div>\n            {React.isValidElement(children) && React.cloneElement(children, elementProps)}\n        </div>\n    );\n};\n\n/**\n * Material-UI input for formik field constructor.\n * @param {Object} props - any needed props\n */\nexport const FormikField: React.FC<FieldProps> = (props) => {\n    const useStyles = makeStyles((theme) =>\n        createStyles({\n            root: {\n                '& > div': {\n                    fontFamily: getFontsWithEmoji(theme)\n                }\n            }\n        }),\n    );\n\n    const classes = useStyles();\n\n    return (\n        <FormControl {...props}><TextField classes={classes}/></FormControl>\n    );\n};\n\n/**\n * Material-UI checkbox for formik field constructor.\n * @param {Object} props - any needed props\n */\nexport const FormikCheckbox: React.FC<FieldProps> = (props) => {\n    return (\n        <FormControl {...props}><Checkbox/></FormControl>\n    );\n};\n\n/**\n * Material-UI select for formik field constructor.\n * @param {Object} props - props.children must be transferred for select options and must be an Array\n */\nexport const formikSelect: React.FC<FieldProps> = React.memo((props) => {\n    let options = props.children as Array<{key: string, value: string}>;\n\n    return (\n        <FormControl {...props}>\n            <Select>\n                {options && options.map(option => {\n                    return(\n                        <MenuItem key={option.key} value={option.key}>{option.value}</MenuItem>\n                    );\n                })}\n            </Select>\n        </FormControl>\n    );\n});\n\n/**\n * Creates formik field based on transferred component.\n * @param {string | undefined} className\n * @param {string | undefined} placeholder\n * @param {string} name - field name as string\n * @param {React.FC} component - valid React component\n * @param {validatorType} validate - field validator\n * @param {Object} props - any props as object\n */\nexport function createField<namesType extends string> (\n    className: string | undefined,\n    placeholder: string | undefined,\n    name: namesType,\n    component: React.FC<FieldProps>,\n    validate: validatorType,\n    props = {}\n) {\n    return (\n        <Field className={className}\n               placeholder={placeholder}\n               name={name}\n               validate={validate}\n               component={component}\n               {...props}\n        />\n    );\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgVkRounded(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm.25 16.996h-2.134c-1.205 0-1.409-.687-2.401-1.679-.897-.897-1.395-.209-1.374 1.068.006.339-.161.611-.566.611-1.264 0-3.08.178-4.918-1.806-1.883-2.033-3.857-6.111-3.857-6.513 0-.237.196-.344.524-.344h2.17c.574 0 .623.284.783.649.667 1.521 2.265 4.574 2.69 2.87.244-.978.344-3.245-.703-3.44-.594-.11.452-.746 1.968-.746.377 0 .786.041 1.205.137.769.179.771.523.761 1.026-.039 1.903-.269 3.184.233 3.507.479.31 1.739-1.717 2.403-3.281.183-.433.219-.722.734-.722h2.654c1.39 0-.182 1.997-1.383 3.557-.968 1.255-.916 1.28.209 2.324.803.744 1.75 1.76 1.75 2.336.002.272-.21.446-.748.446z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgVkRounded);\nexport default __webpack_public_path__ + \"static/media/vk-rounded.850582a3.svg\";\nexport { ForwardRef as ReactComponent };","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\nimport React, {useState} from 'react';\nimport styles from './Navbar.module.css';\nimport {Link, LinkProps, useHistory} from 'react-router-dom';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport {getRouteIdByName, getRouteNameById, routes, routesVariants} from '../../Common/Routes';\nimport {useSelector} from 'react-redux';\nimport {getNewMessagesCountSelector} from '../../Common/Selectors/Selectors';\nimport {Counter} from '../../Common/Counter/Counter';\n\ninterface MainMenuItemProps {\n    icon: React.ReactElement;\n    primary: string;\n    secondary?: JSX.Element;\n    to: string;\n    selected?: boolean;\n    onClick: () => void;\n}\n\n/**\n * Returns one item (<li> for <ul>) of app menu.\n * @param {MainMenuItemProps} props\n * @constructor\n */\nconst MenuItem = (props: MainMenuItemProps) => {\n    const {icon, primary, secondary, to, selected, onClick} = props;\n\n    const renderLink = React.useMemo(() =>\n            React.forwardRef<any, Omit<LinkProps, 'to'>>((itemProps, ref) => (\n                <Link to={to} ref={ref} {...itemProps} />\n            )),\n        [to]);\n\n    return (\n        <li>\n            <ListItem button component={renderLink} selected={selected} onClick={onClick}>\n                <ListItemIcon>{icon}</ListItemIcon>\n                <ListItemText style={{display: 'flex'}} primary={primary} secondary={secondary}/>\n            </ListItem>\n        </li>\n    );\n}\n\n/**\n * Returns complete app menu list.\n * @constructor\n */\nconst Navbar = () => {\n    const history = useHistory();\n    const currentRoute = history.location.pathname.substr(1) as routesVariants;\n    const newMessagesCount = useSelector(getNewMessagesCountSelector);\n    const [selectedIndex, setSelectedIndex] = useState(getRouteIdByName(currentRoute));\n\n    const setActive = (index: number) => {\n        setSelectedIndex(index);\n    };\n\n    const MenuList = Object.keys(routes).map(route => {\n        let currentRoute = route as routesVariants;\n        let currentRouteId = routes[currentRoute].id;\n        let title = routes[currentRoute].title;\n        let icon = React.createElement(routes[currentRoute].icon);\n        let routeName = getRouteNameById(currentRouteId);\n        let secondary = (routeName === 'dialogs' && newMessagesCount > 0) ? <Counter count={newMessagesCount}/> : undefined;\n\n        return <MenuItem to={\"/\" + routeName}\n                         primary={title}\n                         secondary={secondary}\n                         icon={icon}\n                         selected={selectedIndex === currentRouteId}\n                         onClick={() => {setActive(currentRouteId)}}\n                         key={routeName}\n        />\n    });\n\n    return(\n        <div className={styles.drawerContainer}>\n            <List>\n                {MenuList}\n            </List>\n        </div>\n    );\n};\n\nexport default Navbar;","import React, {ChangeEvent, useEffect, useState} from \"react\";\nimport styles from './ProfileInfo.module.css';\nimport Preloader from \"../../../Common/Preloader/Preloader\";\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport TextField from '@material-ui/core/TextField';\nimport Divider from '@material-ui/core/Divider';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\n\ntype propsType = {\n    status: string,\n    isOwner: boolean,\n    statusFetching: boolean,\n    blockWidth?: string,\n    updateStatus: (status: string) => void\n};\n\n/**\n * Returns status block or input for editing status.\n * @param {propsType} props - props object\n * @param {string} props.status - status text\n * @param {boolean} props.isOwner - is user owner of this page\n * @param {boolean} props.statusFetching - fetching in progress flag\n * @param {string=} props.blockWidth - with of block (optional)\n * @param {function(status: string):void} props.updateStatus - callback for set status\n * @constructor\n */\nconst ProfileStatus: React.FC<propsType> = (props) => {\n    const useStyles = makeStyles((theme: Theme) =>\n        createStyles({\n            statusInput: {\n                margin: theme.spacing(1),\n            },\n            statusText: {\n                overflowWrap: 'anywhere',\n                maxWidth: props.blockWidth || 'auto',\n                flexBasis: '35.5ch',\n                flexGrow: 1,\n                whiteSpace: 'pre-line'\n            },\n            divider: {\n                maxWidth: props.blockWidth || 'auto',\n            }\n        }),\n    );\n\n    const classes = useStyles();\n\n    let statusText = props.status || 'No status';\n\n    let [isStatusEditing, setStatusEditing] = useState(false);\n    let [status, setStatus] = useState(props.status);\n\n    useEffect(() => {\n        setStatus(props.status);\n    }, [props.status]);\n\n    const toggleEditing = () => {\n        let newValue = !isStatusEditing;\n        setStatusEditing(newValue);\n\n        if (!newValue && status && (statusText !== status)) {\n            props.updateStatus(status);\n        }\n    }\n\n    const onStatusChange = (event: ChangeEvent<HTMLInputElement>) => {\n        setStatus(event.target.value);\n    }\n\n    if (props.statusFetching) {\n        return <Preloader notCentered={true}/>\n    }\n\n    return isStatusEditing && props.isOwner\n        ? <Tooltip title=\"Click to empty place to save\" aria-label=\"save status\" placement=\"right\">\n            <TextField autoFocus={true}\n                       onBlur={toggleEditing}\n                       onChange={onStatusChange}\n                       className={classes.statusInput}\n                       value={status}\n                       multiline={true}\n            />\n          </Tooltip>\n        : <React.Fragment>\n            <div className={styles.statusDiv} onClick={toggleEditing}>\n                {props.isOwner\n                    ? <Tooltip title=\"Click to edit\" aria-label=\"edit status\" placement=\"right\">\n                        <Typography color='textSecondary' className={classes.statusText}>{statusText}</Typography>\n                    </Tooltip>\n                    : <Typography color='textSecondary' className={classes.statusText}>{statusText}</Typography>\n                }\n            </div>\n            <Divider className={classes.divider}/>\n        </React.Fragment>;\n}\n\nexport default ProfileStatus;","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport LanguageIcon from '@material-ui/icons/Language';\nimport TwitterIcon from '@material-ui/icons/Twitter';\nimport InstagramIcon from '@material-ui/icons/Instagram';\nimport YouTubeIcon from '@material-ui/icons/YouTube';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport HttpIcon from '@material-ui/icons/Http';\nimport {contactsType} from '../../../../../types';\nimport {ReactComponent as VkRounded} from '../../../../../assets/images/vk-rounded.svg';\n\ntype contactKeysType = keyof contactsType;\n\ntype propsType = {\n    contactTitle: contactKeysType,\n    contactInfo: string\n}\n\n/**\n * Returns one icon-button as anchor with contact.\n * @param {{\n * contactTitle: contactKeysType\n * contactInfo: string\n * }} props - props like contactsType\n * @param {contactKeysType} props.contactTitle - name of contact\n * @param {string} props.contactInfo - contact link\n * @constructor\n */\nexport const ProfileContact: React.FC<propsType> = ({contactTitle, contactInfo}) => {\n    let Icon = <div/>;\n\n    switch (contactTitle) {\n        case 'facebook':\n            Icon = <FacebookIcon/>;\n            break;\n        case 'website':\n            Icon = <LanguageIcon/>;\n            break;\n        case 'vk':\n            Icon = <SvgIcon component={VkRounded}/>;\n            break;\n        case 'twitter':\n            Icon = <TwitterIcon/>;\n            break;\n        case 'instagram':\n            Icon = <InstagramIcon/>;\n            break;\n        case 'youtube':\n            Icon = <YouTubeIcon/>;\n            break;\n        case 'github':\n            Icon = <GitHubIcon/>;\n            break;\n        case 'mainLink':\n            Icon = <HttpIcon/>;\n            break;\n    }\n\n    return (\n        <IconButton color=\"primary\" component='a' rel={'noreferrer'} href={contactInfo} target={'_blank'}>\n            {Icon}\n        </IconButton>\n    );\n}","import React from \"react\";\nimport {contactsType} from '../../../../types';\nimport {ProfileContact} from './ProfileContact/ProfileContact';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\n\ntype propsType = {\n    aboutMe: string,\n    lookingForAJob: boolean,\n    lookingForAJobDescription: string,\n    contacts: contactsType,\n    isOwner: boolean,\n    blockWidth: string,\n    setEditMode: () => void\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        additionalInfo: {\n            display: 'flex',\n            flexDirection: 'column',\n            '& > div': {\n                marginLeft: theme.spacing(2),\n                marginRight: theme.spacing(2),\n            },\n        },\n        additionalInfoItem: {\n            marginTop: theme.spacing(1)\n        },\n        wrapped: {\n            display: 'flex',\n            flexWrap: 'wrap'\n        },\n        contacts: {\n            display: 'flex',\n            alignItems: 'center',\n            width: '100%'\n        }\n    }),\n);\n\n/**\n * Returns additional info about user with 3 text blocks and 1 block of contact-links.\n * If user is owner of profile also returns button for edit data.\n * @param {propsType} props\n * @constructor\n */\nconst AdditionalInfo: React.FC<propsType> = (props) => {\n    const classes = useStyles();\n\n    let ContactsList = getContactsList(props.contacts);\n    let isNeedContacts = !ContactsList.every(contact => contact === null);\n\n    /**\n     * Returns array of ProfileContacts if contact value is not empty.\n     * @param {contactsType} contacts - array of contacts from profile.\n     */\n    function getContactsList (contacts: contactsType) {\n        return Object.keys(contacts).map((key) => {\n            let contactValue = contacts[key as keyof contactsType];\n\n            return contactValue\n                ? <ProfileContact key={key} contactTitle={key as keyof contactsType} contactInfo={contactValue}/>\n                : null;\n        })\n    }\n\n    return (\n        <div className={classes.additionalInfo} style={{maxWidth: props.blockWidth}}>\n            <div className={classes.additionalInfoItem}>\n                <Typography>About Me: {props.aboutMe || 'Empty'}</Typography>\n                <Typography>Looking for a job: {props.lookingForAJob ? 'Yes' : 'No'}</Typography>\n                {props.lookingForAJob && <Typography className={classes.wrapped}>\n                    Job description: {props.lookingForAJobDescription}\n                </Typography>}\n            </div>\n\n            {isNeedContacts\n                ? <div className={classes.contacts}>\n                    <div>\n                        <Typography>Contacts:</Typography>\n                    </div>\n                    <div  className={classes.wrapped}>\n                        {ContactsList}\n                    </div>\n                </div>\n                : <div className={classes.contacts}>\n                    <Typography>no contacts</Typography>\n                </div>\n            }\n            {props.isOwner && <Button color='primary' variant='contained' onClick={props.setEditMode}>Edit info</Button>}\n        </div>\n    );\n};\n\nexport default AdditionalInfo","import React, {useState} from \"react\";\nimport {required, validatorCreator} from \"../../../../utils/validators\";\nimport {contactsType, profileType} from '../../../../types';\nimport Button from '@material-ui/core/Button';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport {createField, FormikCheckbox, FormikField} from '../../../../Common/FormComponents/FieldsComponentsFormik';\nimport {ErrorMessage, FormikHelpers, FormikProvider, useFormik} from 'formik';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport {useDispatch} from 'react-redux';\nimport {saveProfile} from '../../../../reducers/profileReducer';\n\ntype propsType = {\n    profile: profileType,\n    onChancel: () => void\n}\n\ntype formBasicInfoPropsType = {\n    checked: boolean,\n    triggerCheckbox: () => void\n}\n\ntype formContactsInfoPropsType = {\n    contacts: contactsType\n}\n\ntype formDataType = profileType;\ntype fieldNamesType = keyof formDataType;\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        additionalInfoForm: {\n            display: 'flex',\n            flexDirection: 'column',\n        },\n        buttonsWrapper: {\n            display: 'flex',\n            justifyContent: 'center',\n            '& > *': {\n                margin: theme.spacing(1),\n            },\n        },\n        additionalInfoRow: {\n            display: 'flex',\n            justifyContent: 'start',\n            alignItems: 'center',\n            '& > *': {\n                margin: theme.spacing(1),\n            },\n            '& > p': {\n                flexBasis: '92px',\n                textAlign: 'end',\n                margin: theme.spacing(1),\n            },\n            '& > div': {\n                flexGrow: 1,\n                display: 'flex'\n            }\n        },\n        infoWrapper: {\n            display: 'flex',\n            flexWrap: 'wrap',\n            '& > *': {\n                margin: theme.spacing(1),\n                flexGrow: 1,\n                flexBasis: '460px',\n            }\n        },\n        stretched: {\n            flexGrow: 1\n        },\n        errorText: {\n            color: 'red',\n            marginLeft: theme.spacing(1),\n        },\n        errorsWrapper: {\n            display: 'flex',\n            justifyContent: 'center'\n        }\n    }),\n);\n\n/**\n * Returns form with profile-info data.\n * @param {propsType} props\n * @constructor\n */\nconst AdditionalInfoForm: React.FC<propsType> = (props) => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    let initialValues = props.profile;\n    initialValues.contacts = normalizeContacts(initialValues.contacts);\n\n    const formik = useFormik({\n        initialValues: props.profile,\n        enableReinitialize: true,\n        onSubmit: onSubmit,\n    });\n\n    async function onSubmit (formData: profileType, {setSubmitting, setFieldError, setStatus}: FormikHelpers<profileType>) {\n        let hasApiErrors = '';\n\n        try {\n            await dispatch(saveProfile(formData,  setFieldError, setStatus));\n        }\n        catch (error) {\n            hasApiErrors = error;\n        }\n        finally {\n            setSubmitting(false);\n        }\n\n        if (!hasApiErrors && formik.submitCount > 0) {\n            props.onChancel();\n        }\n    }\n\n    /**\n     * Sets every contact value to empty string if it's value is null.\n     * Because Material-UI not allow null as value to input.\n     * @param {contactsType} contacts - object with contacts\n     */\n    function normalizeContacts (contacts: contactsType) {\n        for (let contact in contacts) {\n            if (contacts.hasOwnProperty(contact)) {\n                contacts[contact as keyof contactsType] = contacts[contact as keyof contactsType] || '';\n            }\n\n        }\n\n        return contacts;\n    }\n\n    /**\n     * Handler for manually trigger lookingForAJob-checkbox in formik.\n     * Because formik can't trigger Material-UI Checkbox by himself if default value set.\n     */\n    function triggerCheckbox() {\n        formik.setFieldValue(\"lookingForAJob\", !formik.values.lookingForAJob);\n    }\n\n    return (\n        <form className={classes.additionalInfoForm} onSubmit={formik.handleSubmit}>\n            <FormikProvider value={formik}>\n            <div className={classes.infoWrapper}>\n                <FormBasicInfo checked={props.profile.lookingForAJob} triggerCheckbox={triggerCheckbox}/>\n                <FormContactsInfo contacts={props.profile.contacts}/>\n            </div>\n            <div className={classes.errorsWrapper}>\n                <div className={classes.errorText}>{formik.status}</div>\n            </div>\n            <div className={classes.buttonsWrapper}>\n                <Button color='primary'\n                        variant='contained'\n                        type='submit'\n                        disabled={formik.isSubmitting || !formik.isValid || !formik.dirty}\n                >Save</Button>\n                <Button color='secondary' variant='contained' onClick={props.onChancel}>Cancel</Button>\n            </div>\n            </FormikProvider>\n        </form>\n    );\n}\n\n/**\n * Returns fields: fullName, aboutMe, lookingForAJob, lookingForAJobDescription\n * for profile-info form with needed handlers.\n * @param {formBasicInfoPropsType} props\n * @constructor\n */\nconst FormBasicInfo: React.FC<formBasicInfoPropsType> = (props) => {\n    const classes = useStyles();\n    const [checked, setChecked] = useState(props.checked);\n\n    /**\n     * Checkbox trigger handler. Sets value to Checkbox and to formik differently.\n     * Because formik can't trigger Material-UI Checkbox by himself if default value set.\n     * @param event\n     */\n    const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        props.triggerCheckbox();\n        setChecked(event.target.checked);\n    };\n\n    return (\n        <Card variant={'outlined'}>\n            <div className={classes.additionalInfoRow}>\n                <Typography>Full name: </Typography>\n                {createField<fieldNamesType>(\n                    classes.stretched,\n                    'Your name',\n                    'fullName',\n                    FormikField,\n                    validatorCreator([required])\n                )}\n                <ErrorMessage name='fullName' />\n            </div>\n            <div className={classes.additionalInfoRow}>\n                <Typography>About me: </Typography>\n                {createField<fieldNamesType>(\n                    classes.stretched,\n                    'Say about you',\n                    'aboutMe',\n                    FormikField,\n                    validatorCreator([])\n                )}\n            </div>\n            <div className={classes.additionalInfoRow}>\n                <Typography>Look for job: </Typography>\n                {createField<fieldNamesType>(\n                    undefined,\n                    undefined,\n                    'lookingForAJob',\n                    FormikCheckbox,\n                    validatorCreator([]),\n                    {checked, color: 'primary', onChange}\n                )}\n            </div>\n            <div className={classes.errorText}><ErrorMessage name={'lookingForAJob'} /></div>\n            <div className={classes.additionalInfoRow}>\n                <Typography>Skills: </Typography>\n                {createField<fieldNamesType>(\n                    classes.stretched,\n                    'Say about job or skills',\n                    'lookingForAJobDescription',\n                    FormikField,\n                    validatorCreator([]),\n                    {multiline: true}\n                )}\n            </div>\n        </Card>\n    );\n}\n\n/**\n * Returns fields with contacts for profile-info form.\n * @param {formContactsInfoPropsType} props\n * @constructor\n */\nconst FormContactsInfo: React.FC<formContactsInfoPropsType> = (props) => {\n    const classes = useStyles();\n\n    return (\n        <Card variant={'outlined'}>\n            {Object.keys(props.contacts).map(key => {\n                return (\n                    <div key={key} className={classes.additionalInfoRow}><Typography>{key}:</Typography>\n                        {createField(\n                            classes.stretched,\n                            key + ' link with http',\n                            'contacts.' + key,\n                            FormikField,\n                            validatorCreator([])\n                        )}\n                    </div>\n                );\n            })}\n        </Card>\n    );\n}\n\nexport default AdditionalInfoForm;","import {stringOrNull} from '../../../../types';\nimport React, {ChangeEvent} from 'react';\nimport {useDispatch} from 'react-redux';\nimport userMale from '../../../../assets/images/user-male.png';\nimport {savePhoto} from '../../../../reducers/profileReducer';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport {useHistory} from 'react-router-dom';\nimport {getRouteNameById, routes} from '../../../../Common/Routes';\nimport {startRefreshDialog} from '../../../../reducers/dialogsReducer';\n\ntype profileAvatarPropsType = {\n    largePhoto: stringOrNull,\n    isOwner: boolean,\n    userId: number\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        avatarWrapper: {\n            display: 'flex',\n            flexDirection: 'column',\n            '& > *': {\n                margin: theme.spacing(1),\n            },\n        },\n        large: {\n            width: theme.spacing(38),\n            height: theme.spacing(38),\n        },\n        input: {\n            display: 'none',\n        },\n        label: {\n            display: 'flex',\n            justifyContent: 'center',\n        }\n    }),\n);\n\n/**\n * Returns avatar-block with avatar-image and button for upload new.\n * If user is not owner of this profile returns avatar without button.\n * @param {profileAvatarPropsType} props - url to image, user ID and isOwner.\n * @constructor\n */\nexport const ProfileAvatar: React.FC<profileAvatarPropsType> = (props) => {\n    const classes = useStyles();\n    const history = useHistory();\n    const dispatch = useDispatch();\n\n    const profileAvatarLarge = props.largePhoto || userMale;\n\n    /**\n     * Add new dialog or refresh existing.\n     * Redirects to new dialog's route.\n     */\n    const addDialog = () => {\n        dispatch(startRefreshDialog(props.userId));\n        history.push(`/${getRouteNameById(routes.dialogs.id)}/${props.userId}`);\n    }\n\n    const AddDialogButton = <Button variant='contained' color='primary' onClick={addDialog}>Start dialog</Button>;\n\n    return (\n        <div className={classes.avatarWrapper}>\n            <Avatar className={classes.large} src={profileAvatarLarge}/>\n            {props.isOwner ? <AvatarUploadButton/> : AddDialogButton}\n        </div>\n    );\n}\n\n/**\n * Returns styled button for upload user's avatar.\n * @constructor\n */\nconst AvatarUploadButton: React.FC = () => {\n    const dispatch = useDispatch();\n    const classes = useStyles();\n\n    function onFileChange(event: ChangeEvent<HTMLInputElement>) {\n        if (!event.target.files) {\n            return;\n        }\n\n        dispatch(savePhoto(event.target.files[0]));\n    }\n\n    return (\n        <>\n            <input className={classes.input}\n                   accept='image/*'\n                   type='file'\n                   id='icon-button-file'\n                   onChange={onFileChange}\n            />\n            <label htmlFor='icon-button-file' className={classes.label}>\n                <Button variant=\"contained\"\n                        color=\"primary\"\n                        component=\"span\"\n                        startIcon={<PhotoCamera />}\n                >\n                    Upload\n                </Button>\n            </label>\n        </>\n    );\n}","export default __webpack_public_path__ + \"static/media/social-network-pattern-background.066f3894.jpg\";","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\nimport React, {useState} from 'react';\nimport styles from './ProfileInfo.module.css';\nimport Preloader from \"../../../Common/Preloader/Preloader\";\nimport ProfileStatus from \"./ProfileStatus\";\nimport AdditionalInfo from \"./AdditionalInfo/AdditionalInfo\";\nimport AdditionalInfoForm from \"./AdditionalInfoForm/AdditionalInfoForm\";\nimport {profileType} from '../../../types';\nimport {ProfileAvatar} from './ProfileAvatar/ProfileAvatar';\nimport Typography from '@material-ui/core/Typography';\nimport ProfileBackground from '../../../assets/images/social-network-pattern-background.jpg';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\n\nexport type propsType = {\n    profile: profileType | null,\n    status: string,\n    isOwner: boolean,\n    statusFetching: boolean,\n    updateStatus: (status: string) => void,\n}\n\nconst wallpaperBlend = 'linear-gradient(rgba(255,255,255,.95), rgba(255,255,255,.95))';\nconst blockWidth = '52.5ch';\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        wallpaper: {\n            backgroundImage: `${wallpaperBlend}, url(${ProfileBackground})`,\n            backgroundSize: '40%',\n            margin: theme.spacing(-3)\n        },\n        profileDescriptionWrapper: {\n            display: 'flex',\n            flexDirection: 'column',\n            flexGrow: 1,\n            margin: theme.spacing(0, 4),\n        }\n    }),\n);\n\n/**\n * Returns profile-block with avatar, status and profile info.\n * @param {propsType} props - props\n * @constructor\n */\nconst ProfileInfo: React.FC<propsType> = (props) => {\n    const classes = useStyles();\n\n    let [isEditMode, setEditMode] = useState(false);\n\n    if (!props.profile) {\n        return <Preloader/>\n    }\n\n    return (\n        <div className={classes.wallpaper}>\n            <div className={styles.profileDescription}>\n                <ProfileAvatar largePhoto={props.profile.photos.large} isOwner={props.isOwner} userId={props.profile.userId}/>\n                <div className={classes.profileDescriptionWrapper}>\n                    <Typography variant='h4'>{props.profile.fullName}</Typography>\n                    <ProfileStatus status={props.status}\n                                   updateStatus={props.updateStatus}\n                                   statusFetching={props.statusFetching}\n                                   isOwner={props.isOwner}\n                                   blockWidth={blockWidth}\n                    />\n                    {isEditMode\n                            ? <AdditionalInfoForm onChancel={() => setEditMode(false)}\n                                                  profile={props.profile}\n                            />\n                            : <AdditionalInfo aboutMe={props.profile.aboutMe}\n                                              lookingForAJob={props.profile.lookingForAJob}\n                                              lookingForAJobDescription={props.profile.lookingForAJobDescription}\n                                              contacts={props.profile.contacts}\n                                              setEditMode={() => setEditMode(true)}\n                                              isOwner={props.isOwner}\n                                              blockWidth={blockWidth}\n                            />\n                    }\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ProfileInfo;","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\nimport React from 'react';\nimport styles from './MyPosts.module.css';\nimport Post from '../../../Common/Post/Post';\nimport {postsDataType, stringOrNull} from '../../../types';\nimport List from '@material-ui/core/List';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\nimport {AddMessageForm} from '../../../Common/AddMessageForm/AddMessageForm';\nimport {profileActions} from '../../../reducers/profileReducer';\nimport Typography from '@material-ui/core/Typography';\nimport {PostActions} from '../../../Common/Post/PostActions/PostActions';\n\nexport type myPostsPropsType = {\n    postsData: Array<postsDataType>,\n    avatar: stringOrNull,\n    userName: stringOrNull\n}\n\n/**\n * @const\n * @type string\n * @description block max width.\n */\nconst maxWidth = '30ch';\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        postsList: {\n            width: '100%',\n            maxWidth: maxWidth,\n            backgroundColor: theme.palette.background.paper,\n            display: 'flex',\n            flexDirection: 'column-reverse'\n        },\n        postsTitle: {\n            margin: theme.spacing(2, 0)\n        }\n    })\n);\n\n/**\n * Component with title, form and list of posts.\n * @param {myPostsPropsType} props\n * @constructor\n */\nconst MyPosts: React.FC<myPostsPropsType> = (props) => {\n    const classes = useStyles();\n\n    let posts = props.postsData.map( (post) =>\n        <Post key={'MyPost' +post.id}\n              postId={post.id}\n              action={PostActions.textWithLikes(post.text, post.id, post.likes)}\n              avatar={props.avatar}\n              userName={props.userName}\n              blockWidth={maxWidth}\n        />\n    );\n\n    return (\n        <div className={styles.postBlock}>\n            <Typography variant='h5' className={classes.postsTitle}>Posts</Typography>\n            <AddMessageForm blockWidth={maxWidth}\n                            sendMessage={profileActions.sendPost}\n                            buttonText='Add Post'\n                            minTextLength={2}\n                            maxTextLength={100}\n            />\n            <List className={classes.postsList}>\n                {posts}\n            </List>\n        </div>\n    );\n};\n\nexport default MyPosts;","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\nimport {connect} from \"react-redux\";\nimport MyPosts, {myPostsPropsType} from \"./MyPosts\";\nimport {appStateType} from '../../../redux/reduxStore';\n\nlet mapStateToProps = (state: appStateType) => {\n    return (\n        {\n            postsData: state.profilePage.postsData,\n            avatar: state.profilePage.profile ? state.profilePage.profile.photos.small : '',\n            userName: state.auth.login\n        }\n    );\n};\n\nconst MyPostsContainer = connect<myPostsPropsType, {}, {}, appStateType>(\n    mapStateToProps,\n    {}\n)(MyPosts);\n\nexport default MyPostsContainer;","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\nimport React from 'react';\nimport ProfileInfo, {propsType} from './ProfileInfo/ProfileInfo';\nimport MyPostsContainer from \"./MyPosts/MyPostsContainer\";\n\ntype profilePropsType = propsType;\n\n/**\n * Whole profile-page with info about user and posts-block.\n * @param {profilePropsType} props\n * @constructor\n */\nconst Profile: React.FC<profilePropsType> = (props) => {\n    return (\n        <div>\n            <ProfileInfo profile={props.profile}\n                         status={props.status}\n                         updateStatus={props.updateStatus}\n                         statusFetching={props.statusFetching}\n                         isOwner={props.isOwner}\n            />\n            <MyPostsContainer/>\n        </div>);\n};\n\nexport default Profile;","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\nimport React from 'react';\nimport Profile from \"./Profile\";\nimport {connect} from \"react-redux\";\nimport {getProfile, getStatus, updateStatus} from \"../../reducers/profileReducer\";\nimport {RouteComponentProps, withRouter} from 'react-router-dom';\nimport withAuthRedirect from \"../../Hocs/withAuthRedirect\";\nimport {MatchParams, profileType} from \"../../types\";\nimport {appStateType} from \"../../redux/reduxStore\";\n\ntype matchType = RouteComponentProps<MatchParams>;\n\ntype mapStatePropsType = {\n    profile: profileType | null,\n    status: string,\n    statusFetching: boolean\n};\n\ntype mapDispatchPropsType = {\n    getProfile: (userId: number) => void,\n    getStatus: (userId: number) => void,\n    updateStatus: (status: string) => void,\n};\n\ntype ownPropsType = {\n};\n\ntype propsType = mapStatePropsType & mapDispatchPropsType & ownPropsType;\n\n/**\n * Class component which returns profile-page.\n * If not logged-in will redirect to login.\n */\nclass ProfileContainer extends React.Component<propsType & matchType> {\n    getProfileData() {\n        this.props.getProfile(parseInt(this.props.match.params.userId));\n        this.props.getStatus(parseInt(this.props.match.params.userId));\n    }\n\n    componentDidMount() {\n        this.getProfileData();\n    }\n\n    componentDidUpdate(prevProps: mapStatePropsType  & matchType, prevState: appStateType, snapshot: any) {\n        if (prevProps.match.params.userId !== this.props.match.params.userId) {\n            this.getProfileData();\n        }\n    }\n    render() {\n        return <Profile {...this.props} isOwner={!this.props.match.params.userId}/>\n    }\n}\n\nlet mapStateToProps = (state: appStateType) => {\n    return {\n        profile: state.profilePage.profile,\n        status: state.profilePage.status,\n        statusFetching: state.profilePage.statusFetching\n    }\n}\n\nconst mapDispatchToProps: mapDispatchPropsType = {\n    getProfile,\n    getStatus,\n    updateStatus,\n}\n\nexport default connect<\n    mapStatePropsType,\n    mapDispatchPropsType,\n    ownPropsType,\n    appStateType\n    >(mapStateToProps, mapDispatchToProps) (withRouter(withAuthRedirect(ProfileContainer)));","import {Api} from '../components/API/api';\nimport {baseThunkType, captchaResultCodeType, stringOrNull} from '../types';\nimport {inferActionsType} from '../redux/reduxStore';\n\nexport type initialStateType = {\n    id: number | null,\n    email: stringOrNull,\n    login: stringOrNull,\n    isAuth: boolean,\n    isFetching: boolean,\n    captchaUrl: stringOrNull\n}\n\ntype actionsType = inferActionsType<typeof authActions>;\ntype thunkType = baseThunkType<actionsType, void>;\n\nconst initialState: initialStateType = {\n    id: null,\n    email: null,\n    login: null,\n    isAuth: false,\n    isFetching: false,\n    captchaUrl: null\n};\n\nconst authReducer = (state = initialState, action: actionsType): initialStateType => {\n    switch (action.type) {\n\n        case 'SN/AUTH/SET_AUTH':\n            return {\n                ...state,\n                ...action.data\n            }\n        case 'SN/AUTH/GET_CAPTCHA_SUCCESS':\n            return {\n                ...state,\n                captchaUrl: action.url\n            }\n        default:\n            return state;\n    }\n}\n\nexport const authActions = {\n    setAuth: (id: number | null, email: stringOrNull, login: stringOrNull, isAuth:boolean) => ({\n        type: 'SN/AUTH/SET_AUTH',\n        data: {id, email, login, isAuth}} as const),\n    getCaptchaSuccess: (url: stringOrNull) => ({type: 'SN/AUTH/GET_CAPTCHA_SUCCESS', url} as const)\n}\n\n/**\n * Gets auth data from backend and set it to state if successful.\n */\nexport const getAuth = (): thunkType => async (dispatch) => {\n    let data = await Api.Auth.Me();\n\n    if (data === null) {\n        return;\n    }\n\n    let {id, email, login} = data;\n    dispatch(authActions.setAuth(id, email, login, true));\n}\n\n/**\n * Sets user logged-in on backend, if needed captcha then requests it.\n * If successful sets auth data to state.\n * @param {string} email - user email\n * @param {string} password - user password\n * @param {boolean} rememberMe - is need long session\n * @param {string} captcha - captcha text from user\n * @param {(string):void=} errorCallback - callback calls on error from backend (optional)\n */\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string, errorCallback = (data: string) => {}): thunkType => async (dispatch) => {\n    let data = await Api.Auth.Login(email, password, rememberMe, captcha);\n\n    if (data.error) {\n        if (data.resultCode === captchaResultCodeType.captchaRequired) {\n            await dispatch(getCaptcha());\n        }\n\n        return errorCallback(data.error);\n    }\n\n    await dispatch(getAuth());\n    dispatch(authActions.getCaptchaSuccess(null));\n}\n\n/**\n * Sets user as logged-out on backend, if successful clears auth data in state.\n */\nexport const logout = (): thunkType => async (dispatch) => {\n    let data = await Api.Auth.Logout();\n\n    if (!data) {\n        return;\n    }\n\n    dispatch(authActions.setAuth(null, null, null, false));\n}\n\n/**\n * Gets url with captcha image from backend and sets it to state if successful.\n */\nexport const getCaptcha = (): thunkType => async (dispatch) => {\n    let url = await Api.Security.getCaptcha();\n\n    if (!url) {\n        return;\n    }\n\n    dispatch(authActions.getCaptchaSuccess(url));\n}\n\nexport default authReducer;","import {stringOrNull} from '../../../types';\nimport {maxLengthCreator, required, validatorCreator} from '../../../utils/validators';\nimport React from 'react';\nimport styles from '../Login.module.css';\nimport {FormikHelpers, FormikProvider, useFormik} from 'formik';\nimport Button from '@material-ui/core/Button';\nimport {useDispatch} from 'react-redux';\nimport {login} from '../../../reducers/authReducer';\nimport {createField, FormikCheckbox, FormikField} from '../../../Common/FormComponents/FieldsComponentsFormik';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\n\nlet maxLength30 = maxLengthCreator(30);\n\nexport type loginFormDataType = {\n    login: string,\n    password: string,\n    rememberMe: boolean,\n    captcha: string\n}\n\ntype fieldNamesType = keyof loginFormDataType\ntype loginFormPropsType = {\n    captchaUrl: stringOrNull\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        loginForm: {\n            display: 'flex',\n            flexDirection: 'column',\n            width: '20ch',\n            margin: theme.spacing(1),\n            '& > *': {\n                display: 'flex',\n            },\n        },\n        loginInput: {\n            flexGrow: 1,\n            margin: theme.spacing(1),\n        },\n        errorText: {\n            color: 'red',\n            alignSelf: 'center',\n            marginBottom: theme.spacing(1),\n        }\n    }),\n);\n\n/**\n * Form for login process with two static inputs, one optional input with image for captcha, checkbox and button.\n * @param {loginFormPropsType} props - url to captcha img\n * @constructor\n */\nconst LoginForm: React.FC<loginFormPropsType> = (props) => {\n    const dispatch = useDispatch();\n    const classes = useStyles();\n    const initialValues = {\n        login: '',\n        password: '',\n        rememberMe: false,\n        captcha: ''\n    }\n\n    const onSubmit = (formData: loginFormDataType, {setSubmitting}: FormikHelpers<loginFormDataType>) => {\n        dispatch(login(formData.login, formData.password, formData.rememberMe, formData.captcha, formik.setStatus));\n        setSubmitting(false);\n    };\n\n    const formik = useFormik({\n        initialValues,\n        onSubmit,\n    });\n\n    return (\n        <form className={classes.loginForm} onSubmit={formik.handleSubmit}>\n            <FormikProvider value={formik}>\n                {createField<fieldNamesType>(\n                    classes.loginInput,\n                    'Enter login',\n                    'login',\n                    FormikField,\n                    validatorCreator([required, maxLength30])\n                )}\n                {createField<fieldNamesType>(\n                    classes.loginInput,\n                    'Enter password',\n                    'password',\n                    FormikField,\n                    validatorCreator([required, maxLength30]),\n                    {type: 'password'}\n                )}\n                <div className={styles.checkboxWrapper}>\n                    {createField<fieldNamesType>(\n                        undefined,\n                        undefined,\n                        'rememberMe',\n                        FormikCheckbox,\n                        validatorCreator([]),\n                        {color: 'primary'}\n                    )}\n                    <span>remember me</span>\n                </div>\n                {props.captchaUrl && <img alt={'captcha'} src={props.captchaUrl}/>}\n                {props.captchaUrl && createField<fieldNamesType>(\n                    classes.loginInput,\n                    'Enter symbols from image',\n                    'captcha',\n                    FormikField,\n                    validatorCreator([required, maxLength30]),\n                    {autoComplete: 'off'}\n                )}\n            </FormikProvider>\n            {formik.status && <div className={classes.errorText}>{formik.status}</div>}\n            <Button variant='contained'\n                    color='primary'\n                    type='submit'\n                    disabled={formik.isSubmitting || !formik.isValid}\n            >\n                Login\n            </Button>\n        </form>\n    );\n}\n\nexport default LoginForm;","import React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {Redirect} from \"react-router-dom\";\nimport {getCaptchaUrlSelector, getIsAuthSelector} from '../../Common/Selectors/Selectors';\nimport LoginForm from './LoginForm/LoginForm';\nimport Typography from '@material-ui/core/Typography';\nimport {createStyles, makeStyles} from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        loginPage: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            height: '80vh'\n        }\n    }),\n);\n\n/**\n * Login-page with header and form.\n * @constructor\n */\nexport const Login: React.FC = () => {\n    const classes = useStyles();\n    const auth = useSelector(getIsAuthSelector);\n    const captchaUrl = useSelector(getCaptchaUrlSelector);\n\n    if (auth) {\n        return <Redirect to={'/profile'}/>\n    }\n\n    return (\n        <div className={classes.loginPage}>\n            <Typography variant='h4'>Login</Typography>\n            <LoginForm captchaUrl={captchaUrl}/>\n        </div>\n    );\n}","import {getAuth} from './authReducer';\nimport {inferActionsType} from '../redux/reduxStore';\nimport {baseThunkType} from '../types';\nimport {getNewMessagesCount} from './dialogsReducer';\n\nexport type initialStateType = {\n    initDone: boolean\n}\n\ntype actionsType = inferActionsType<typeof appActions>;\ntype thunkType = baseThunkType<actionsType, void>;\n\nconst initialState: initialStateType = {\n    initDone: false\n};\n\nconst authReducer = (state = initialState, action: actionsType): initialStateType => {\n    switch (action.type) {\n\n        case 'SN/APP/SET_INIT_DONE':\n            return {\n                ...state,\n                initDone: true\n            }\n        default:\n            return state;\n    }\n}\n\nexport const appActions = {\n    setInitDone: () => ({type: 'SN/APP/SET_INIT_DONE'} as const)\n}\n\nexport const makeInit = (): thunkType => (dispatch) => {\n    let auth = dispatch(getAuth());\n\n    Promise.all([auth]).then(() => {\n        dispatch(appActions.setInitDone());\n    })\n}\n\nexport const getInfoAfterLogin = (): thunkType => async (dispatch) => {\n    await dispatch(getNewMessagesCount());\n}\n\nexport default authReducer;","import React from \"react\";\nimport {Redirect} from \"react-router-dom\";\n\nconst StartPage = () => {\n    return <Redirect to={'/profile'}/>;\n}\n\nexport default StartPage;","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","/* \n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\nimport React from 'react';\nimport styles from './AppHeader.module.css';\nimport {NavLink} from \"react-router-dom\";\nimport {useDispatch, useSelector} from 'react-redux';\nimport {getIsAuthSelector, getLoginSelector} from '../../Common/Selectors/Selectors';\nimport {logout} from '../../reducers/authReducer';\nimport logo from '../../assets/images/logo.svg';\nimport userMale from \"../../assets/images/user-male.png\";\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport ExitToAppOutlinedIcon from '@material-ui/icons/ExitToAppOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        loginBlock: {\n            display: 'flex',\n            alignItems: 'center',\n            marginLeft: theme.spacing(1),\n            marginRight: theme.spacing(1),\n        },\n        login: {\n            ...theme.typography.subtitle1,\n            padding: theme.spacing(1),\n        },\n        appBar: {\n            zIndex: theme.zIndex.drawer + 1,\n        },\n        headerContentWrapper: {\n            justifyContent: 'space-between'\n        }\n    }),\n);\n\nexport const AppHeader: React.FC = () => {\n    const classes = useStyles();\n    const isAuth = useSelector(getIsAuthSelector);\n    const login = useSelector(getLoginSelector);\n\n    const dispatch = useDispatch();\n\n    const logoutCallback = () => {\n        dispatch(logout());\n    }\n\n    return(\n        <AppBar position=\"fixed\" className={classes.appBar}>\n            <Toolbar className={classes.headerContentWrapper}>\n                <img className={styles.headerLogo}\n                     src={logo}\n                     alt=\"logo\"/>\n                <div>\n                    {\n                        isAuth\n                            ? <div className={classes.loginBlock}>\n                                <Avatar alt={'Header Avatar'} src={userMale}/>\n                                <Typography className={classes.login}>{login}</Typography>\n                                <IconButton onClick={logoutCallback}>\n                                    <ExitToAppOutlinedIcon/>\n                                </IconButton>\n                            </div>\n                            : <NavLink to='/login' className={styles.loginLink}>Login</NavLink>\n                    }\n                </div>\n            </Toolbar>\n        </AppBar>\n    );\n};","import React from 'react';\n\nexport const NotFound: React.FC = () => {\n    return(\n        <div>404 Not Found</div>\n    );\n}","import React, {Dispatch, SetStateAction} from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Slide from '@material-ui/core/Slide';\n\ntype globalAlertPropsType = {\n    isOpen: boolean,\n    text: string,\n    setNotificationOpen: Dispatch<SetStateAction<boolean>>\n}\n\n/**\n * Component for smooth popup alert.\n * @param {globalAlertPropsType} props\n * @constructor\n */\nexport const GlobalAlert: React.FC<globalAlertPropsType> = (props) => {\n    const handleNotificationClose = (event: React.SyntheticEvent | MouseEvent, reason?: string) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        props.setNotificationOpen(false);\n    };\n\n    return (\n        <Snackbar anchorOrigin={{vertical: 'top', horizontal: 'right'}}\n                  open={props.isOpen}\n                  onClose={handleNotificationClose}\n                  autoHideDuration={6000}\n                  TransitionComponent={Slide}\n                  message={props.text}\n        />\n    );\n}","import React, {Suspense, useEffect} from \"react\";\nimport './App.css';\nimport Navbar from './components/Navbar/Navbar';\nimport {Route, Switch} from 'react-router-dom';\nimport ProfileContainer from \"./components/Profile/ProfileContainer\";\nimport {Login} from \"./components/Login/Login\";\nimport {connect} from \"react-redux\";\nimport {getInfoAfterLogin, makeInit} from \"./reducers/appReducer\";\nimport Preloader from \"./Common/Preloader/Preloader\";\nimport StartPage from \"./Pages/StartPage\";\nimport {appStateType} from './redux/reduxStore';\nimport {AppHeader} from './components/Header/AppHeader';\nimport {NotFound} from './components/NotFound';\nimport {createStyles, makeStyles, Theme} from '@material-ui/core';\nimport Drawer from '@material-ui/core/Drawer';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport {getRouteNameById, routes} from './Common/Routes';\nimport {GlobalAlert} from './Common/GlobalAlert/GlobalAlert';\n\nconst Settings = React.lazy(() => import('./components/Settings/Settings'));\nconst Music = React.lazy(() => import('./components/Music/Music'));\nconst News = React.lazy(() => import('./components/News/News'));\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\nconst DialogsContainer = React.lazy(() => import('./components/Messages/DialogsContainer'));\nconst ChatPage = React.lazy(() => import('./Pages/ChatPage'));\n\ntype mapStatePropsType = {\n    isInitDone: boolean,\n    isAuth: boolean\n}\n\ntype mapDispatchPropsType = {\n    makeInit: () => void,\n    getInfoAfterLogin: () => void,\n}\n\ntype ownPropsType = {};\n\ntype propsType = mapStatePropsType & mapDispatchPropsType & ownPropsType;\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            display: 'flex',\n        },\n        drawer: {\n            width: drawerWidth,\n            [theme.breakpoints.down('md')]: {\n                width: theme.spacing(7) + 1,\n            },\n            flexShrink: 0,\n        },\n        drawerPaper: {\n            width: drawerWidth,\n            [theme.breakpoints.down('md')]: {\n                width: theme.spacing(7) + 1,\n            },\n        },\n        drawerContainer: {\n            overflow: 'auto',\n        },\n        content: {\n            flexGrow: 1,\n            width: 330,\n            padding: theme.spacing(3),\n        },\n    }),\n);\n\n/**\n * Returns whole app (header, menu and needed page).\n * @param {propsType} props - props object\n * @param {boolean} props.isAuth - is user authorized\n * @param {boolean} props.isInitDone - is App initiated\n * @param {function():void} props.makeInit - App initiation function\n * @param {function():void} props.getInfoAfterLogin - function which will call after user logged in.\n * @constructor\n */\nconst App: React.FC<propsType> = (props) => {\n    let {isAuth, isInitDone, makeInit, getInfoAfterLogin} = props;\n    const [isNotificationOpen, setNotificationOpen] = React.useState(false);\n    const [notificationText, setNotificationText] = React.useState('');\n\n    /**\n     * Catch error reason and set alert-data.\n     * @param reason\n     */\n    const catchGenericError = (reason: PromiseRejectionEvent) => {\n        let response = reason.reason.response;\n\n        if (response) {\n            setNotificationText('ERROR: server returned ' + response.status + ' ' + response.statusText);\n        } else {\n            setNotificationText('ERROR: server is not respond!');\n        }\n\n        setNotificationOpen(true);\n    };\n\n    useEffect(() => {\n        window.addEventListener('unhandledrejection', catchGenericError);\n        makeInit();\n\n        // returned function will be called on component unmount\n        return () => {\n            window.removeEventListener('unhandledrejection', catchGenericError);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        if (isAuth) {\n            getInfoAfterLogin();\n        }\n    }, [isAuth, getInfoAfterLogin]);\n\n    const classes = useStyles();\n\n    if (!isInitDone) {\n        return <Preloader/>\n    }\n\n    return (\n        <div className={classes.root}>\n            <GlobalAlert isOpen={isNotificationOpen}\n                         text={notificationText}\n                         setNotificationOpen={setNotificationOpen}\n            />\n            <AppHeader/>\n            <Drawer className={classes.drawer} variant='permanent' classes={{paper: classes.drawerPaper}}>\n                <Toolbar />\n                <Navbar/>\n            </Drawer>\n            <Content/>\n        </div>\n    );\n}\n\n/**\n * Returns correct page depends on route, uses suspend for lazy-load.\n * @constructor\n */\nconst Content = () => {\n    const classes = useStyles();\n\n    let DialogsComponent = () =>  <DialogsContainer/>;\n    let ProfileComponent = () => <ProfileContainer/>;\n\n    return(\n        <main className={classes.content}>\n            <Toolbar />\n            <Suspense fallback={<div>Загрузка...</div>}>\n                <Switch>\n                    <Route exact path=\"/\" component={StartPage}/>\n                    <Route path={'/' + getRouteNameById(routes.profile.id) + '/:userId?'} component={ProfileComponent}/>\n                    <Route path={'/' + getRouteNameById(routes.dialogs.id) + '/:userId?'} component={DialogsComponent}/>\n                    <Route path={'/' + getRouteNameById(routes.news.id)} component={News}/>\n                    <Route path={'/' + getRouteNameById(routes.music.id)} component={Music}/>\n                    <Route path={'/' + getRouteNameById(routes.users.id)} component={UsersContainer}/>\n                    <Route path={'/' + getRouteNameById(routes.settings.id)} component={Settings}/>\n                    <Route path={'/' + getRouteNameById(routes.chat.id)} component={ChatPage}/>\n                    <Route path=\"/login\" component={Login}/>\n                    <Route path=\"*\" component={NotFound}/>\n                </Switch>\n            </Suspense>\n        </main>\n    );\n}\n\nlet mapStateToProps = (state: appStateType): mapStatePropsType => {\n    return {\n        isInitDone: state.app.initDone,\n        isAuth: state.auth.isAuth\n    }\n}\n\nexport default connect<mapStatePropsType, mapDispatchPropsType, ownPropsType, appStateType>(\n    mapStateToProps,\n    {makeInit, getInfoAfterLogin}\n)(App);\n","import {applyMiddleware, combineReducers, createStore} from \"redux\";\nimport profileReducer from \"../reducers/profileReducer\";\nimport dialogsReducer from \"../reducers/dialogsReducer\";\nimport usersReducer from \"../reducers/usersReducer\";\nimport authReducer from \"../reducers/authReducer\";\nimport appReducer from \"../reducers/appReducer\";\nimport thunk from \"redux-thunk\";\nimport chatReducer from '../reducers/chatReducer';\n\nconst rootReducer = combineReducers({\n    profilePage: profileReducer,\n    dialogsPage: dialogsReducer,\n    usersPage: usersReducer,\n    auth: authReducer,\n    app: appReducer,\n    chat: chatReducer\n});\n\ntype rootReducerType = typeof rootReducer;\nexport type appStateType = ReturnType<rootReducerType>;\n\nexport type inferActionsType<T> = T extends {[key: string]: (...args: any[]) => infer U} ? U : never;\n\nlet store = createStore(rootReducer, applyMiddleware(thunk));\n\nexport default store;","import reportWebVitals from './reportWebVitals';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport '@fontsource/roboto'\nimport './index.css';\nimport App from './App';\nimport store from \"./redux/reduxStore\";\nimport {HashRouter} from \"react-router-dom\";\nimport {Provider} from \"react-redux\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <HashRouter>\n            <Provider store={store}>\n                <App/>\n            </Provider>\n        </HashRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export type validatorType = (value: string) => string | undefined;\n\n/**\n * Creates one validator from array of validators.\n * Returns error text or empty text as string.\n * Need for formik field-level validation.\n * @param {Array<validatorType>} validators - array of validators.\n */\nexport const validatorCreator = (validators: Array<validatorType>) => (value: string) => {\n    let error = '';\n\n    validators.forEach(validator => {\n        let result = validator(value);\n        if (result !== undefined) error = result;\n    })\n    return error;\n}\n\n/**\n * Validator for required string.\n * Returns undefined or error text as string.\n * @param {string} value - string from form for validation.\n */\nexport const required: validatorType = (value) => {\n    if (value) return undefined;\n    return 'Required field'\n}\n\n/**\n * Function which creates \"max length validator\".\n * @param {number} maxLength - max string length for validator.\n */\nexport const maxLengthCreator = (maxLength: number): validatorType => (value) => {\n    if (value && value.length > maxLength) return `Max length is ${maxLength}`;\n    return undefined;\n}\n\n/**\n * Function which creates \"min length validator\".\n * @param {number} minLength - min string length for validator.\n */\nexport const minLengthCreator = (minLength: number): validatorType => (value) => {\n    if (value && value.length < minLength) return `Min length is ${minLength}`;\n    return undefined;\n}","import axios from \"axios\";\nimport {\n    basicResponseType,\n    captchaResultCodeType, messageListType, Override,\n    photosType,\n    profileType,\n    resultCodesType, stringOrNull, userListType, usersType\n} from \"../../types\";\nimport {filterType} from '../../reducers/usersReducer';\n\nconst defaultApi = axios.create({\n    withCredentials: true,\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\n    headers: {'API-KEY': '4b793204-e0f1-45c5-b96a-007d58f175b3'}\n});\n\ntype meResponseType = Override<basicResponseType, {\n    data: {\n        id: number,\n        email: string,\n        login: string\n    }\n}>;\n\ntype loginResponseType = Override<basicResponseType, {\n    data: {\n        id: number\n    },\n    resultCode: resultCodesType | captchaResultCodeType\n}>;\n\ntype updateProfileResponseType = Override<basicResponseType, {\n    fieldsErrors: Array<string>\n}>;\n\ntype savePhotoResponseType = Override<basicResponseType, {\n    data: {\n        photos: photosType,\n    },\n    fieldsErrors: Array<string>\n}>;\n\ntype captchaResponseType = {\n    url: string\n}\n\ntype getUsersResponseType = {\n    items: Array<usersType>,\n    totalCount: number,\n    error: string | null\n}\n\ntype dialogsListResponseType = Array<userListType>\n\ntype dialogsSendMessageResponseType = Override<basicResponseType, {\n    data: {\n        message: messageListType\n    },\n    fieldsErrors: Array<string>\n}>\n\ntype getMessagesListResponseType = {\n    items: Array<messageListType>,\n    totalCount: number,\n    error: stringOrNull\n}\n\nexport const Api = {\n    Users: {\n        getUsers: (pageSize = 4, currentPage = 0, filter: filterType) => {\n            return defaultApi.get<getUsersResponseType>('users',\n                {params: {count: pageSize, page: currentPage + 1, term: filter.searchTerm, friend: filter.friend}}\n            ).then(response => {\n                if (response.data.items.length === 0) {\n                    return null;\n                }\n\n                return response.data;\n            });\n        },\n        unfollow: (userId: number) => {\n            return defaultApi.delete<basicResponseType>('follow/' + userId)\n                .then( response => {\n                    return response.data.resultCode === resultCodesType.Success;\n                });\n        },\n        follow: (userId: number) => {\n            return defaultApi.post<basicResponseType>('follow/' + userId).then( response => {\n                    return response.data.resultCode === resultCodesType.Success;\n                });\n        }\n    },\n    Auth: {\n        Me: () => {\n            return defaultApi.get<meResponseType>('auth/me/').then(response => {\n                if (response.data.resultCode === resultCodesType.Success) {\n                    return response.data.data;\n                }\n\n                return null;\n            });\n        },\n        Login: (email: string, password: string, rememberMe: boolean, captcha: string) => {\n            return defaultApi.post<loginResponseType>('auth/login/', {email, password, rememberMe, captcha}).then(response => {\n                if (response.data.resultCode === resultCodesType.Success) {\n                    return {result: response.data.data};\n                }\n\n                let message = response.data.messages.length ? response.data.messages[0] : 'Unknown error';\n                let resultCode = response.data.resultCode || -1;\n\n                return {error: message, resultCode: resultCode};\n            });\n        },\n        Logout: () => {\n            return defaultApi.delete<basicResponseType>('auth/login/').then(response => {\n                return response.data.resultCode === resultCodesType.Success;\n            });\n        }\n    },\n    Profile: {\n        getProfile: (userId: number) => {\n            return defaultApi.get<profileType>('profile/' + userId)\n                .then( response => {\n                    if (!response.data) {\n                        return null;\n                    }\n\n                    return response.data;\n                });\n        },\n        getStatus: (userId: number) => {\n            return defaultApi.get<string>('profile/status/' + userId)\n                .then( response => {\n                    return response.data;\n                });\n        },\n        updateStatus: (status: string) => {\n            return defaultApi.put<basicResponseType>('profile/status', {status})\n                .then( response => {\n                    return response.data.resultCode === resultCodesType.Success;\n                });\n        },\n        savePhoto: (file: File) => {\n            const formData = new FormData();\n            formData.append('image', file);\n\n            return defaultApi.put<savePhotoResponseType>('profile/photo', formData, {\n                headers: {'Content-Type': 'multipart/form-data'}\n            })\n                .then( response => {\n                    if (response.data.resultCode === 0) {\n                        return response.data.data.photos;\n                    }\n                });\n        },\n        saveProfile: (profile: profileType) => {\n            return defaultApi.put<updateProfileResponseType>('profile', profile)\n                .then(response => {\n                    if (response.data.resultCode === resultCodesType.Success) {\n                        return Promise.resolve();\n                    } else {\n                        let reason = response.data.messages.length ? response.data.messages : ['Unknown error. (unknown)'];\n                        return Promise.reject(reason);\n                    }\n                });\n        }\n    },\n    Security: {\n        getCaptcha: () => {\n            return defaultApi.get<captchaResponseType>('security/get-captcha-url')\n                .then(response => {\n                    if (!response.data) {\n                        return;\n                    }\n\n                    return response.data.url;\n                })\n        }\n    },\n    Dialogs: {\n        getDialogsList: () => {\n            return defaultApi.get<dialogsListResponseType>('dialogs')\n                .then(response => {\n                    if (!response.data) {\n                        return;\n                    }\n\n                    return response.data;\n                })\n        },\n        startRefreshDialog: (userId: number) => {\n            return defaultApi.put<basicResponseType>('dialogs/' + userId)\n                .then(response => {\n                    return response.data.resultCode === resultCodesType.Success\n                })\n        },\n        getMessagesList: (userId: number) => {\n            return defaultApi.get<getMessagesListResponseType>('dialogs/' + userId + '/messages')\n                .then(response => {\n                    if (response.data.error) {\n                        return;\n                    }\n\n                    return response.data.items;\n                })\n        },\n        sendMessage: (userId: number, message: string) => {\n            return defaultApi.post<dialogsSendMessageResponseType>('dialogs/' + userId + '/messages', {body: message})\n                .then(response => {\n                    if (response.data.resultCode !== resultCodesType.Success) {\n                        return;\n                    }\n\n                    return response.data.data.message;\n                })\n        },\n        getNewMessagesCount: () => {\n            return defaultApi.get<number>('dialogs/messages/new/count')\n                .then(response => {\n                    return response.data;\n                })\n        }\n    }\n}","export type setErrorsType = (field: string, value: string | undefined) => void;\nexport type setStatusType = (field: string) => void;\n\n/**\n * Empty default callback which do nothing.\n * Need for callback param optionality.\n * @param {string} field - not need to put param\n * @param {string|undefined} value - not need to put param\n */\nexport function emptyErrorCallback(field: string, value: string | undefined) {}\n/**\n * Empty default callback which do nothing.\n * Need for callback param optionality.\n * @param {string} data - not need to put param\n */\nexport function emptyStatusCallback(data: string) {}\n\n/**\n * Call callback for every item in data. Parse every item to field name and error text.\n * @param {Array<string>} data - array with errors.\n * @param {setErrorsType} formikSetErrors - setErrors function from formik.\n * @param {setStatusType} formikSetStatus - setStatus function from formik.\n */\nexport function setErrors (data: Array<string>, formikSetErrors: setErrorsType, formikSetStatus: setStatusType) {\n    data.forEach(error => {\n        let rawError = error.split('(')[1],\n            hasSubkey = rawError.indexOf('->') !== -1,\n            key, subkey, errorTextRaw, errorText;\n\n        if (hasSubkey) {\n            key = rawError.split('->')[0].toLowerCase();\n            subkey = rawError.substring(0, rawError.length - 1).split('->')[1].toLowerCase();\n            errorTextRaw = error.split('(')[0];\n            errorText = errorTextRaw.substring(0, errorTextRaw.length - 1);\n\n            formikSetErrors(`${key}.${subkey}`, errorText);\n        } else {\n            key = rawError.substring(0, rawError.length - 1);\n            errorTextRaw = error.split('(')[0];\n            errorText = errorTextRaw.substring(0, errorTextRaw.length -1);\n\n            if (key === 'contacts') {\n                formikSetStatus(errorText);\n            }\n\n            formikSetErrors(key, errorText);\n        }\n    });\n}","import {Api} from '../components/API/api';\nimport {baseThunkType, contactsType, photosType, postsDataType, profileType} from '../types';\nimport {inferActionsType} from '../redux/reduxStore';\nimport {nanoid} from 'nanoid';\nimport {emptyErrorCallback, emptyStatusCallback, setErrors} from '../utils/formikSetters';\n\nexport type initialStateType = {\n    postsData: Array<postsDataType>,\n    profile: profileType | null,\n    statusFetching: boolean,\n    status: string\n}\n\ntype actionsType = inferActionsType<typeof profileActions>;\ntype thunkType = baseThunkType<actionsType>;\n\nconst initialState: initialStateType = {\n    postsData: [\n        {id: nanoid(), text: 'First post!', likes: 15},\n        {id: nanoid(), text: 'Second post!', likes: 20},\n    ],\n    profile: null,\n    statusFetching: false,\n    status: ''\n};\n\nconst profileReducer = (state = initialState, action: actionsType): initialStateType => {\n    switch (action.type) {\n        case 'SN/PROFILE/ADD_POST':\n            if (action.newPost === undefined || action.newPost.replace(/\\s+/g, '') === '') {\n                return state;\n            }\n\n            return {\n                ...state,\n                postsData: [...state.postsData, {id: nanoid(), text: action.newPost, likes: 0}]\n            };\n        case 'SN/PROFILE/DELETE_POST':\n            return {\n                ...state, postsData: state.postsData.filter(post => {\n                    return post.id !== action.postId;\n                })\n            };\n        case 'SN/PROFILE/SET_PROFILE':\n            return {...state, profile: action.profile};\n        case 'SN/PROFILE/UPDATE_PROFILE':\n            return {\n                ...state,\n                profile: {\n                    ...(state.profile! as profileType),\n                    ...action.profile,\n                    contacts: {...(state.profile![\"contacts\"] as contactsType), ...action.profile.contacts}\n                }\n            };\n        case 'SN/PROFILE/SET_STATUS':\n            return {...state, status: action.status};\n        case 'SN/PROFILE/TOGGLE_STATUS_FETCHING':\n            return {...state, statusFetching: !state.statusFetching};\n        case 'SN/PROFILE/SAVE_PHOTO_SUCCESS':\n            return {...state, profile: {...(state.profile! as profileType), photos: action.photos}};\n        case 'SN/PROFILE/ADD_LIKE':\n            return {...state, postsData: state.postsData.map((post) => {\n                return post.id === action.postId ? {...post, likes: post.likes+1} : post;\n                })}\n        default:\n            return state;\n    }\n}\n\nexport const profileActions = {\n    sendPost: (newPost: string) => ({type: 'SN/PROFILE/ADD_POST', newPost} as const),\n    deletePost: (postId: string) => ({type: 'SN/PROFILE/DELETE_POST', postId} as const),\n    setProfile: (profile: profileType) => ({type: 'SN/PROFILE/SET_PROFILE', profile} as const),\n    updateProfile: (profile: profileType) => ({type: 'SN/PROFILE/UPDATE_PROFILE', profile} as const),\n    setStatus: (status: string) => ({type: 'SN/PROFILE/SET_STATUS', status} as const),\n    toggleStatusFetching: () => ({type: 'SN/PROFILE/TOGGLE_STATUS_FETCHING'} as const),\n    savePhotoSuccess: (photos: photosType) => ({type: 'SN/PROFILE/SAVE_PHOTO_SUCCESS', photos} as const),\n    addLike: (postId: string) => ({type: 'SN/PROFILE/ADD_LIKE', postId} as const),\n}\n\nexport const getStatus = (userId: number): thunkType => async (dispatch, getState) => {\n    let id = userId || getState().auth.id;\n\n    if (!id) {\n        return;\n    }\n\n    let data = await Api.Profile.getStatus(id);\n\n    if (data === null) {\n        dispatch(profileActions.setStatus(''));\n        return;\n    }\n\n    dispatch(profileActions.setStatus(data));\n}\n\nexport const updateStatus = (status: string): thunkType => async (dispatch) => {\n    dispatch(profileActions.toggleStatusFetching());\n\n    try {\n        let data = await Api.Profile.updateStatus(status);\n\n        if (!data) {\n            return;\n        }\n\n        dispatch(profileActions.setStatus(status));\n    } catch (reason) {\n        //TODO: переписать на нормальный вывод ошибки\n        alert('Не удалось сохранить статус, попробуйте позже!');\n    }\n\n    dispatch(profileActions.toggleStatusFetching());\n}\n\nexport const getProfile = (userId: number): thunkType => async (dispatch, getState) => {\n    let id = userId || getState().auth.id;\n\n    if (!id) {\n        return;\n    }\n\n    let data = await Api.Profile.getProfile(id);\n\n    if (data === null) {\n        return;\n    }\n\n    dispatch(profileActions.setProfile(data));\n}\n\nexport const savePhoto = (file: File): thunkType => async (dispatch) => {\n    let data = await Api.Profile.savePhoto(file);\n\n    if (data === undefined) {\n        return;\n    }\n\n    dispatch(profileActions.savePhotoSuccess(data));\n}\n\nexport const saveProfile = (profile: profileType, errorCallback = emptyErrorCallback, statusCallback = emptyStatusCallback): thunkType => (dispatch) => {\n    let promise = Api.Profile.saveProfile(profile);\n\n    return promise.then(\n        () => {\n            dispatch(profileActions.updateProfile(profile));\n            return Promise.resolve();\n        },\n        (data) => {\n            setErrors(data, errorCallback, statusCallback)\n            return Promise.reject('formHasErrors');\n    });\n}\n\nexport default profileReducer;","import {Action} from 'redux';\nimport {ThunkAction} from 'redux-thunk';\nimport {appStateType} from './redux/reduxStore';\n\nexport type Override<T1, T2> = Omit<T1, keyof T2> & T2;\n\nexport type stringOrNull = string | null;\n\nexport type profileType = {\n    userId: number,\n    lookingForAJob: boolean,\n    lookingForAJobDescription: string,\n    fullName: string,\n    contacts: contactsType,\n    photos: photosType,\n    aboutMe: string\n}\n\nexport type contactsType = {\n    github: string,\n    vk: string,\n    facebook: string,\n    instagram: string,\n    twitter: string,\n    website: string,\n    youtube: string,\n    mainLink: string\n}\n\nexport type photosType = {\n    small: string | null,\n    large: string | null\n}\n\nexport type usersType = {\n    id: number,\n    name: string,\n    status: stringOrNull,\n    photos: photosType,\n    followed: boolean,\n    uniqueUrlName: stringOrNull\n}\n\nexport interface MatchParams {\n    userId: string;\n}\n\nexport type arrayOfNumbers = Array<number>;\n\nexport enum resultCodesType {\n    Success = 0,\n    Error = 1\n}\n\nexport enum captchaResultCodeType {\n    captchaRequired = 10\n}\n\nexport type basicResponseType = {\n    data: {},\n    resultCode: resultCodesType,\n    messages: Array<string>\n};\n\nexport type baseThunkType<A extends Action, R = Promise<void>> = ThunkAction<R, appStateType, unknown, A>;\n\nexport type postsDataType = {\n    id: string,\n    text: string,\n    likes: number\n}\n\nexport type userListType = {\n    id: number,\n    userName: string,\n    hasNewMessages: boolean,\n    newMessagesCount: number,\n    photos: photosType\n}\n\nexport type messageListType = {\n    id: string,\n    body: string,\n    senderId: number,\n    senderName: string,\n    recipientId: number,\n    viewed: boolean\n}","import {appStateType} from '../../redux/reduxStore';\n\nexport function getUsersSelector (state: appStateType) {\n    return state.usersPage.users;\n}\n\nexport function getCurrentPageSelector (state: appStateType) {\n    return state.usersPage.currentPage;\n}\n\nexport function getPageSizeSelector (state: appStateType) {\n    return state.usersPage.pageSize;\n}\n\nexport function getIsUsersFetchingSelector (state: appStateType) {\n    return state.usersPage.isUsersFetching;\n}\n\nexport function getFollowingInProgressSelector (state: appStateType) {\n    return state.usersPage.followingInProgress;\n}\n\nexport function getUsersFilterSelector (state: appStateType) {\n    return state.usersPage.filter;\n}\n\nexport function getIsAuthSelector (state: appStateType) {\n    return state.auth.isAuth;\n}\n\nexport function getCaptchaUrlSelector (state: appStateType) {\n    return state.auth.captchaUrl;\n}\n\nexport function getLoginSelector (state: appStateType) {\n    return state.auth.login;\n}\n\nexport function getOwnerIdSelector (state: appStateType) {\n    return state.auth.id;\n}\n\nexport function getChatMessages (state: appStateType) {\n    return state.chat.messages;\n}\n\nexport function getIsChatConnectedSelector (state: appStateType) {\n    return state.chat.isConnected;\n}\n\nexport function getDialogsMessagesSelector (state: appStateType) {\n    return state.dialogsPage.messageList;\n}\n\nexport function getDialogsUserListSelector (state: appStateType) {\n    return state.dialogsPage.userList;\n}\n\nexport function getNewMessagesCountSelector (state: appStateType) {\n    return state.dialogsPage.newMessagesCount;\n}","import {inferActionsType} from '../redux/reduxStore';\nimport {baseThunkType, messageListType, userListType} from '../types';\nimport {Api} from '../components/API/api';\n\nexport type initialStateType = {\n    userList: Array<userListType>,\n    messageList: Array<messageListType>,\n    currentChatId: number,\n    newMessagesCount: number\n};\n\ntype actionsType = inferActionsType<typeof dialogsActions>;\ntype thunkType = baseThunkType<actionsType>;\n\nconst initialState: initialStateType = {\n    userList: [],\n    messageList: [],\n    currentChatId: 0,\n    newMessagesCount: 0\n};\n\nconst dialogReducer = (state = initialState, action: actionsType): initialStateType => {\n    switch (action.type) {\n        case 'SN/DIALOGS/ADD_MESSAGE':\n            return {\n                ...state,\n                messageList: [...state.messageList, {...action.newMessage}]\n            };\n        case 'SN/DIALOGS/DIALOGS_LIST_RECEIVED':\n            return {\n                ...state,\n                userList: [...action.payload]\n            }\n        case 'SN/DIALOGS/MESSAGES_LIST_RECEIVED':\n            return {\n                ...state,\n                messageList: [...action.payload]\n            }\n        case 'SN/DIALOGS/CHAT_CHANGED':\n            return {\n                ...state,\n                currentChatId: action.payload\n            }\n        case 'SN/DIALOGS/NEW_MESSAGES_COUNT_RECEIVED': {\n            return {\n                ...state,\n                newMessagesCount: action.payload\n            }\n        }\n        default:\n            return state;\n    }\n}\n\nexport const dialogsActions = {\n    messageSent: (newMessage: messageListType) => ({type: 'SN/DIALOGS/ADD_MESSAGE', newMessage} as const),\n    dialogsListReceived: (list: Array<userListType>) => ({type: 'SN/DIALOGS/DIALOGS_LIST_RECEIVED', payload: list} as const),\n    messagesListReceived: (list: Array<messageListType>) => ({type: 'SN/DIALOGS/MESSAGES_LIST_RECEIVED', payload: list} as const),\n    chatChanged: (chatId: number) => ({type: 'SN/DIALOGS/CHAT_CHANGED', payload: chatId} as const),\n    newMessagesCountReceived: (count: number) => ({type: 'SN/DIALOGS/NEW_MESSAGES_COUNT_RECEIVED', payload: count} as const),\n}\n\nexport const getDialogsList = (): thunkType => async (dispatch) => {\n    let data = await Api.Dialogs.getDialogsList();\n\n    if (!data || !data.length) {\n        dispatch(dialogsActions.dialogsListReceived([]));\n        return;\n    }\n\n    dispatch(dialogsActions.dialogsListReceived(data));\n}\n\nexport const startRefreshDialog = (userId: number): thunkType => async (dispatch) => {\n    let isSuccessful = await Api.Dialogs.startRefreshDialog(userId);\n\n    if (isSuccessful) {\n        await dispatch(getDialogsList());\n    }\n}\n\nexport const getMessagesList = (userId: number): thunkType => async (dispatch) => {\n    let data = await Api.Dialogs.getMessagesList(userId);\n\n    if (!data) {\n        return;\n    }\n\n    dispatch(dialogsActions.messagesListReceived(data));\n}\n\nexport const sendMessage = (text: string): thunkType => async (dispatch, getState) => {\n    let userId = getState().dialogsPage.currentChatId;\n    let data = await Api.Dialogs.sendMessage(userId, text);\n\n    if (!data) {\n        return;\n    }\n\n    dispatch(dialogsActions.messageSent(data));\n}\n\nexport const getNewMessagesCount = (): thunkType => async (dispatch) => {\n    let data = await Api.Dialogs.getNewMessagesCount();\n\n    dispatch(dialogsActions.newMessagesCountReceived(data));\n}\n\nexport default dialogReducer;","export default __webpack_public_path__ + \"static/media/user-male.ba3e9327.png\";","export default __webpack_public_path__ + \"static/media/preloader-spinner.635e13f4.svg\";","import React from \"react\";\nimport styles from './Preloader.module.css';\nimport preloader from \"../../assets/images/preloader-spinner.svg\";\n\ntype preloaderPropsType = {\n    notCentered?: boolean\n}\n\nconst Preloader: React.FC<preloaderPropsType> = (props) => {\n    return (\n        <div className={!props.notCentered ? styles.preloaderWrapper : undefined}>\n            <img alt='preloader' className={styles.preloader} src={preloader}/>\n        </div>\n    );\n}\n\nexport default Preloader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textWithIconWrapper\":\"PostActions_textWithIconWrapper__2-gBR\",\"icon\":\"PostActions_icon__3y829\"};"],"sourceRoot":""}