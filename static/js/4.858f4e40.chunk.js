(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{304:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n=a(39),c=a(0),s=a.n(c),r=a(287),i=a(13),o=a(57),l=a(76),d=a(2),j=function(e){var t=e.messages,a=Object(i.d)(o.k),c=s.a.useRef(null),j=s.a.useState(!0),u=Object(n.a)(j,2),b=u[0],O=u[1];return s.a.useEffect((function(){b&&setTimeout((function(){var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})}),500)}),[t,b]),Object(d.jsxs)(r.a,{style:{height:e.height,overflowY:"auto",width:"100%"},onScroll:function(e){var t=e.currentTarget;t.scrollHeight-t.scrollTop===t.clientHeight?!b&&O(!0):b&&O(!1)},children:[t,a&&Object(d.jsx)("li",{children:Object(d.jsx)(l.a,{notCentered:!0})}),Object(d.jsx)("li",{ref:c})]})}},309:function(e,t,a){"use strict";var n=a(20),c=a(21);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=c(a(0)),r=(0,n(a(22)).default)(s.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");t.default=r},316:function(e,t,a){"use strict";a.r(t);var n=a(62),c=a(0),s=a.n(c),r=a(78),i=a(296),o=a(13),l=a(23),d=a(186),j=a(187),u=a(298),b=a(107),O=a(2),h=function(){var e=Object(d.a)((function(e){return Object(j.a)({helperText:Object(n.a)({display:"flex",flexGrow:1,alignItems:"center",justifyContent:"center"},e.breakpoints.down("xs"),{display:"none"})})}))();return Object(O.jsx)(u.a,{className:e.helperText,children:Object(O.jsx)(b.a,{variant:"h4",color:"textSecondary",children:"Please click on user name to start dialog"})})},f=a(57),x=a(121),g=a(125),p=a(126),m=a(304),v=a(297),y=function(e){var t=Object(o.c)();return Object(O.jsx)("li",{style:{display:"flex",justifyContent:"center"},children:Object(O.jsx)(v.a,{variant:"outlined",color:"primary",onClick:function(){t(Object(r.d)(e.currentDialogId))},children:"More messages"})})},w=a(17),I=a(290),k=a(309),M=a.n(k),N=Object(d.a)((function(e){return Object(j.a)({goBackButtonWrapper:Object(n.a)({},e.breakpoints.up("sm"),{display:"none"})})})),C=function(){var e=Object(l.g)(),t=N();return Object(O.jsxs)("div",{className:t.goBackButtonWrapper,children:[Object(O.jsx)(I.a,{onClick:function(){e.push("/".concat(Object(w.b)(w.c.dialogs.id)))},children:Object(O.jsx)(M.a,{})}),Object(O.jsx)(i.a,{})]})},D=function(e){var t=Object(d.a)((function(){return Object(j.a)({emptyMessages:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:e.height}})}))();return Object(O.jsxs)("div",{className:t.emptyMessages,children:[Object(O.jsx)(b.a,{color:"textSecondary",variant:"h4",children:"No messages yet"}),Object(O.jsx)(b.a,{color:"textSecondary",variant:"h4",children:"send something to your opponent"})]})},W=a(76),S="70vh",T=Object(d.a)((function(e){return Object(j.a)({messages:{flexGrow:1,width:"20%",margin:e.spacing(3)}})}));var L=function(e){var t,a=e.currentDialogId,n=Object(o.d)(f.e),c=Object(o.d)(f.f),l=Object(o.d)(f.p),d=null===(t=Object(o.d)(f.q))||void 0===t?void 0:t.small,j=Object(o.d)(f.d),u=Object(o.d)(f.l),b=T(),h=Object(o.c)(),v=function(e,t){var a=e.filter((function(e){return e.id===t?e:void 0}));return a.length?a[0]:null}(c,a),w=v?v.photos.small:null;s.a.useEffect((function(){a&&v&&v.hasNewMessages&&h(r.b.chatMessagesRead(a))}),[a,h,v]);var I=n.map((function(e){var t=e.senderId===l,a=t?e.viewed?p.a.textWithOk(e.body,e.addedAt):p.a.textWithWait(e.body,e.addedAt):p.a.onlyText(e.body,e.addedAt);return Object(O.jsx)(x.a,{postId:e.id,action:a,avatar:t?d||null:w,userName:"",rightSided:t},"Message"+e.id)}));return j&&I.unshift(u?Object(O.jsx)(W.a,{}):Object(O.jsx)(y,{currentDialogId:a},"MoreMessagesButton")),Object(O.jsxs)("div",{className:b.messages,children:[Object(O.jsx)(C,{}),n.length?Object(O.jsx)(m.a,{messages:I,height:S}):u?Object(O.jsx)("div",{style:{height:S},children:Object(O.jsx)(W.a,{})}):Object(O.jsx)(D,{height:S}),Object(O.jsx)(i.a,{}),Object(O.jsx)(g.a,{blockWidth:"30ch",sendMessage:r.f,buttonText:"Send",minTextLength:2})]})},B=a(123),E=a(134),G=a(287),A=Object(d.a)((function(){return Object(j.a)({dialogsItems:{height:"90vh",overflowY:"auto",flexGrow:1,"& > li > div":{flexGrow:1}}})})),H=function(e){var t=Object(o.d)(f.f),a=A(),n=t.map((function(t){var a=t.newMessagesCount>0?Object(O.jsx)(E.a,{count:t.newMessagesCount,inCorner:!0}):void 0;return Object(O.jsx)(x.a,{postId:String(t.id),avatar:t.photos.small,userName:t.userName,userId:t.id,primaryLink:t.id!==e.currentDialogId,action:a},"User"+t.id)}));return Object(O.jsx)(G.a,{className:a.dialogsItems,children:n})};t.default=Object(l.h)(Object(B.a)((function(e){var t=Object(o.d)(f.j),a=Object(o.c)(),c=e.match.params.userId?parseInt(e.match.params.userId):0,l=Object(d.a)((function(e){return Object(j.a)({dialogsWrapper:{display:"flex",margin:e.spacing(-3)},dialogs:Object(n.a)({display:"flex"},e.breakpoints.down("xs"),{display:c?"none":"flex",width:"100%"}),emptyDialogsList:{minWidth:200}})}))();return s.a.useEffect((function(){c&&(a(r.b.chatChanged(c)),a(Object(r.d)(c)))}),[c,a]),s.a.useEffect((function(){a(Object(r.c)())}),[]),Object(O.jsxs)("div",{className:l.dialogsWrapper,children:[Object(O.jsxs)("div",{className:l.dialogs,children:[t?Object(O.jsx)("div",{className:l.emptyDialogsList,children:Object(O.jsx)(W.a,{})}):Object(O.jsx)(H,{currentDialogId:c}),Object(O.jsx)(i.a,{orientation:"vertical"})]}),c?Object(O.jsx)(L,{currentDialogId:c}):Object(O.jsx)(h,{})]})})))}}]);
//# sourceMappingURL=4.858f4e40.chunk.js.map