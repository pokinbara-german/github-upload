(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{105:function(e,t,n){"use strict";function r(e){var t,n=null===(t=e.typography.fontFamily)||void 0===t?void 0:t.split(",");return null===n||void 0===n||n.splice(1,0,"Twemoji Mozilla"),null===n||void 0===n?void 0:n.join(",")}n.d(t,"a",(function(){return r}))},116:function(e,t,n){e.exports={preloaderWrapper:"Preloader_preloaderWrapper__1-vJZ",preloader:"Preloader_preloader__1fZTW"}},117:function(e,t,n){e.exports={headerLogo:"AppHeader_headerLogo__1q3ko",loginLink:"AppHeader_loginLink__1Epif"}},121:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(81),i=n(188),s=n(185),o=n(244),u=n(240),l=n(243),d=n(186),f=n(187),p=n(38),b=n(17),j=n(105),O=n(2);t.a=function(e){var t=Object(d.a)((function(t){return Object(f.a)({postsItem:{padding:0,justifyContent:e.rightSided?"end":"start"},postWrapper:{display:"flex",margin:t.spacing(1),width:e.blockWidth||"max-content",padding:t.spacing(1,2)},text:{whiteSpace:"pre-line",overflowWrap:"break-word",display:"flex",justifyContent:"center",flexDirection:"column","& > p > span":{fontFamily:Object(j.a)(t)}}})}))(),n=e.avatar||c.a,r=[Object(O.jsx)(a.a.Fragment,{children:e.action},e.postId)],h=Object(O.jsx)(p.c,{to:"/".concat(Object(b.b)(b.c.dialogs.id),"/").concat(e.userId),children:e.userName});return Object(O.jsx)(s.a,{alignItems:"flex-start",className:t.postsItem,children:Object(O.jsxs)(l.a,{variant:"outlined",className:t.postWrapper,children:[Object(O.jsx)(o.a,{children:e.userId?Object(O.jsx)(p.c,{to:"/".concat(Object(b.b)(b.c.profile.id),"/").concat(e.userId),children:Object(O.jsx)(i.a,{alt:"ava",src:n})}):Object(O.jsx)(i.a,{alt:"ava",src:n})}),Object(O.jsx)(u.a,{className:t.text,primary:e.primaryLink?h:e.userName,secondary:r})]})})}},123:function(e,t,n){"use strict";var r=n(6),a=n(106),c=(n(0),n(23)),i=n(13),s=n(2);t.a=function(e){return Object(i.b)((function(e){return{isAuth:e.auth.isAuth}}))((function(t){var n=t.isAuth,i=Object(a.a)(t,["isAuth"]);return n?Object(s.jsx)(e,Object(r.a)({},i)):Object(s.jsx)(c.a,{to:"/login"})}))}},124:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return x})),n.d(t,"d",(function(){return m}));var r=n(9),a=n.n(r),c=n(18),i=n(46),s=n(6),o=n(28),u={users:[],currentPage:0,pageSize:12,isUsersFetching:!1,followingInProgress:[],filter:{searchTerm:null,friend:null}};function l(e,t,n){return e.id===t?Object(s.a)(Object(s.a)({},e),{},{followed:n}):e}var d=function(e){return{type:"SN/USERS/FOLLOWED",userId:e}},f=function(e){return{type:"SN/USERS/UNFOLLOWED",userId:e}},p=function(e){return{type:"SN/USERS/SET_SEARCH_TERM",filter:e}},b=function(e){return{type:"SN/USERS/USERS_LIST_RECEIVED",users:e}},j=function(e){return{type:"SN/USERS/UPDATE_IS_USERS_FETCHING",isUsersFetching:e}},O=function(e,t){return{type:"SN/USERS/UPDATE_IS_FOLLOWING_FETCHING",isFetching:e,userId:t}},h=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c,i,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r().usersPage.currentPage,i=r().usersPage.pageSize,n(j(!0)),e!==r().usersPage.filter&&n(p(e)),t.next=6,o.a.Users.getUsers(i,c,e);case 6:if(s=t.sent,n(j(!1)),null!==s){t.next=10;break}return t.abrupt("return");case 10:n(b(s.items));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},g=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(O(!0,t)),e.next=3,r(t);case 3:e.sent&&n(c(t)),n(O(!1,t));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),x=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e,n,o.a.Users.follow,d);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e,n,o.a.Users.unfollow,f);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/USERS/FOLLOWED":return Object(s.a)(Object(s.a)({},e),{},{users:e.users.map((function(e){return l(e,t.userId,!0)}))});case"SN/USERS/UNFOLLOWED":return Object(s.a)(Object(s.a)({},e),{},{users:e.users.map((function(e){return l(e,t.userId,!1)}))});case"SN/USERS/SET_SEARCH_TERM":return Object(s.a)(Object(s.a)({},e),{},{filter:Object(s.a)({},t.filter),users:[],currentPage:0});case"SN/USERS/USERS_LIST_RECEIVED":return Object(s.a)(Object(s.a)({},e),{},{users:[].concat(Object(i.a)(e.users),Object(i.a)(t.users)),currentPage:++e.currentPage});case"SN/USERS/UPDATE_IS_USERS_FETCHING":return Object(s.a)(Object(s.a)({},e),{},{isUsersFetching:t.isUsersFetching});case"SN/USERS/UPDATE_IS_FOLLOWING_FETCHING":return Object(s.a)(Object(s.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(i.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}}},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));n(0);var r=n(69),a=n.n(r),c=n(107),i=n(177),s=n.n(i),o=n(178),u=n.n(o),l=n(13),d=n(37),f=n(302),p=n(175),b=n.n(p),j=n(176),O=n.n(j),h=n(186),g=n(187),x=n(2),m=Object(h.a)((function(e){return Object(g.a)({likeWrapper:{display:"flex","& > *":{margin:e.spacing(1)}}})})),v=function(e){var t="small",n=Object(l.c)(),r=m();return Object(x.jsxs)("span",{onClick:function(e){var t=e.currentTarget.id.substr(5);t&&n(d.e.addLike(t))},id:"post-"+e.postId,className:r.likeWrapper,children:[Object(x.jsx)(f.a,{arrow:!0,title:"Like","aria-label":"like",children:e.likeCount?Object(x.jsx)(b.a,{fontSize:t}):Object(x.jsx)(O.a,{fontSize:t})}),Object(x.jsx)("span",{children:e.likeCount})]})},S="0.9rem";function y(e){if(!e||e.indexOf("T")<1)return"";var t=e.split("T"),n=t[0].replace(/-/g," ").split(" ").reverse().join(" "),r=t[1].split(".")[0];return"".concat(n," ").concat(r)}var E={onlyText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(x.jsxs)("span",{className:a.a.textWithIconWrapper,children:[Object(x.jsx)(c.a,{component:"span",children:e}),t&&Object(x.jsx)(w,{date:t})]})},textWithOk:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(x.jsxs)("span",{className:a.a.textWithIconWrapper,children:[Object(x.jsx)(c.a,{component:"span",children:e}),Object(x.jsxs)("span",{className:a.a.secondRow,children:[t&&Object(x.jsx)(w,{date:t}),Object(x.jsx)(s.a,{style:{fontSize:S},color:"primary",className:a.a.icon})]})]})},textWithWait:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(x.jsxs)("span",{className:a.a.textWithIconWrapper,children:[Object(x.jsx)(c.a,{component:"span",children:e}),Object(x.jsxs)("span",{className:a.a.secondRow,children:[t&&Object(x.jsx)(w,{date:t}),Object(x.jsx)(u.a,{style:{fontSize:S},color:"disabled",className:a.a.icon})]})]})},textWithLikes:function(e,t,n){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(c.a,{component:"span",children:e}),Object(x.jsx)(v,{postId:t,likeCount:n})]})}},w=function(e){return Object(x.jsx)(c.a,{component:"span",style:{fontSize:"0.7rem"},color:"textSecondary",children:y(e.date)})}},126:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(0),a=n.n(r),c=n(44),i=n(19),s=n(29),o=n(297),u=n(302),l=n(186),d=n(187),f=n(13),p=n(39),b=n(290),j=n(174),O=n.n(j),h=n(295),g=(n(235),n(180)),x=n(2),m=function(e){var t=a.a.useState(null),n=Object(p.a)(t,2),r=n[0],c=n[1],i=Boolean(r);return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)(b.a,{onClick:function(e){c(e.currentTarget)},children:Object(x.jsx)(O.a,{})}),Object(x.jsx)(h.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},open:i,anchorEl:r,onClose:function(){c(null)},children:Object(x.jsx)(g.a,{onSelect:e.onEmojiClick,set:"apple"})})]})},v=function(e){var t=Object(s.b)(e.minTextLength),n=e.maxTextLength?Object(s.a)(e.maxTextLength):void 0,r=[s.c,t];void 0!==n&&r.push(n);var a=Object(l.a)((function(t){return Object(d.a)({newPostForm:{display:"flex",flexDirection:"column",maxWidth:e.blockWidth||"inherit","& > div":{display:"flex",margin:t.spacing(1)}},newPostFormInputWrapper:{display:"flex","& > div":{display:"flex",flexGrow:1,margin:t.spacing(1)}},stretched:{flexGrow:1}})})),p=Object(f.c)(),b=a();var j=Object(c.d)({initialValues:{newMessage:""},onSubmit:function(t,n){var r=n.setSubmitting,a=n.resetForm;p(e.sendMessage(t.newMessage)),r(!1),a()}});return Object(x.jsxs)("form",{onSubmit:j.handleSubmit,className:b.newPostForm,children:[Object(x.jsxs)("div",{className:b.newPostFormInputWrapper,children:[Object(x.jsx)(c.c,{value:j,children:Object(x.jsx)(u.a,{title:"You can type multiline. Just hit enter.","aria-label":"Hint",placement:"right",arrow:!0,children:Object(i.c)(b.stretched,"Type something","newMessage",i.b,Object(s.d)(r),{multiline:!0})})}),Object(x.jsx)(m,{onEmojiClick:function(e){j.setFieldValue("newMessage",j.values.newMessage+e.native)}})]}),Object(x.jsx)("div",{children:Object(x.jsx)(o.a,{variant:"contained",color:"primary",type:"submit",disabled:!!e.isBlocked||j.isSubmitting||!j.dirty||!j.isValid,children:e.buttonText})})]})}},134:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var r=n(40),a=n(250),c=n(2),i=function(e){var t=Object(r.a)();return Object(c.jsx)(a.a,{style:{margin:t.spacing(0,1),position:e.inCorner?"absolute":void 0,top:e.inCorner?t.spacing(1):void 0,right:e.inCorner?t.spacing(0):void 0},color:"primary",label:e.count,size:"small"})}},143:function(e,t,n){"use strict";n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return I})),n.d(t,"b",(function(){return C}));var r=n(46),a=n(6),c=n(88),i={"message-received":[],"connection-changed":[]},s=null;function o(){console.log("CLOSE WS"),d(!1),setTimeout(p,3e3)}function u(e){var t=JSON.parse(e.data);t.forEach((function(e){return e.id=Object(c.a)()})),i["message-received"].forEach((function(e){return e(t)}))}function l(){d(!0)}function d(e){i["connection-changed"].forEach((function(t){return t(e)}))}function f(){var e,t,n,r;null===(e=s)||void 0===e||e.removeEventListener("close",o),null===(t=s)||void 0===t||t.removeEventListener("message",u),null===(n=s)||void 0===n||n.removeEventListener("open",l),null===(r=s)||void 0===r||r.close()}function p(){f(),s=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),d(!1),s.addEventListener("close",o),s.addEventListener("message",u),s.addEventListener("open",l)}var b=function(e,t){return i[e].push(t),function(){return i[e]=i[e].filter((function(e){return e!==t}))}},j=function(e,t){i[e]=i[e].filter((function(e){return e!==t}))},O=function(e){var t;null===(t=s)||void 0===t||t.send(e)},h=function(){p()},g=function(){f(),i["message-received"]=[],i["connection-changed"]=[]},x={messages:[],isConnected:!1},m=function(e){return{type:"SN/CHAT/MESSAGES_RECEIVED",payload:e}},v=function(){return{type:"SN/CHAT/CHAT_CLEARED"}},S=function(e){return{type:"SN/CHAT/CONNECTION_CHANGED",payload:e}},y=null,E=function(e){return null===y&&(y=function(t){e(m(t))}),y},w=null,N=function(e){return null===w&&(w=function(t){e(S(t))}),w},k=function(){return function(e){h(),b("message-received",E(e)),b("connection-changed",N(e))}},I=function(){return function(e){j("message-received",E(e)),j("connection-changed",N(e)),e(v()),g()}},C=function(e){return function(){O(e)}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/CHAT/MESSAGES_RECEIVED":return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),Object(r.a)(t.payload)).slice(-100)});case"SN/CHAT/CHAT_CLEARED":return Object(a.a)(Object(a.a)({},e),{},{messages:[]});case"SN/CHAT/CONNECTION_CHANGED":return Object(a.a)(Object(a.a)({},e),{},{isConnected:t.payload});default:return e}}},144:function(e,t,n){e.exports={drawerContainer:"Navbar_drawerContainer__1aacK"}},17:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return x}));var r=n(145),a=n.n(r),c=n(150),i=n.n(c),s=n(151),o=n.n(s),u=n(152),l=n.n(u),d=n(153),f=n.n(d),p=n(154),b=n.n(p),j=n(155),O=n.n(j),h={profile:{id:1,title:"Profile",icon:a.a},dialogs:{id:2,title:"Dialogs",icon:i.a},news:{id:3,title:"News",icon:o.a},music:{id:4,title:"Music",icon:l.a},chat:{id:5,title:"Chat",icon:f.a},users:{id:6,title:"Users",icon:b.a},settings:{id:7,title:"Settings",icon:O.a}},g=function(e){return e in h?h[e].id:0},x=function(e){return Object.keys(h).find((function(t){return h[t].id===e}))}},19:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return x})),n.d(t,"c",(function(){return m}));var r=n(6),a=n(106),c=n(0),i=n.n(c),s=n(44),o=n(249),u=n(246),l=n(247),d=n(242),f=n(186),p=n(187),b=n(105),j=n(2),O=function(e){var t=e.field,n=e.children,c=Object(a.a)(e,["field","children"]),s=c.form.getFieldMeta(t.name),o=s.touched&&s.error,u=s.error||void 0,l=Object(r.a)(Object(r.a)({},t),c);return o&&(l.error=!!o),u&&(l.helperText=u),Object(j.jsx)("div",{children:i.a.isValidElement(n)&&i.a.cloneElement(n,l)})},h=function(e){var t=Object(f.a)((function(e){return Object(p.a)({root:{"& > div":{fontFamily:Object(b.a)(e)}}})}))();return Object(j.jsx)(O,Object(r.a)(Object(r.a)({},e),{},{children:Object(j.jsx)(o.a,{classes:t})}))},g=function(e){return Object(j.jsx)(O,Object(r.a)(Object(r.a)({},e),{},{children:Object(j.jsx)(l.a,{})}))},x=i.a.memo((function(e){var t=e.children;return Object(j.jsx)(O,Object(r.a)(Object(r.a)({},e),{},{children:Object(j.jsx)(u.a,{children:t&&t.map((function(e){return Object(j.jsx)(d.a,{value:e.key,children:e.value},e.key)}))})}))}));function m(e,t,n,a,c){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return Object(j.jsx)(s.b,Object(r.a)({className:e,placeholder:t,name:n,validate:c,component:a},i))}},208:function(e,t,n){},209:function(e,t,n){},237:function(e,t,n){"use strict";n.r(t);var r,a=function(e){e&&e instanceof Function&&n.e(9).then(n.bind(null,311)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},c=n(0),i=n.n(c),s=n(14),o=n.n(s),u=(n(207),n(208),n(62)),l=n(39),d=(n(209),n(6)),f=n(144),p=n.n(f),b=n(38),j=n(23),O=n(287),h=n(185),g=n(286),x=n(240),m=n(17),v=n(13),S=n(57),y=n(134),E=n(2),w=function(e){var t=e.icon,n=e.primary,r=e.secondary,a=e.to,c=e.selected,s=e.onClick,o=i.a.useMemo((function(){return i.a.forwardRef((function(e,t){return Object(E.jsx)(b.b,Object(d.a)({to:a,ref:t},e))}))}),[a]);return Object(E.jsx)("li",{children:Object(E.jsxs)(h.a,{button:!0,component:o,selected:c,onClick:s,children:[Object(E.jsx)(g.a,{children:t}),Object(E.jsx)(x.a,{style:{display:"flex"},primary:n,secondary:r})]})})},N=function(e){var t=Object(j.g)().location.pathname.substr(1),n=Object(v.d)(S.m),r=Object(c.useState)(Object(m.a)(t)),a=Object(l.a)(r,2),s=a[0],o=a[1],u=Object.keys(m.c).map((function(t){var r=t,a=m.c[r].id,c=m.c[r].title,u=i.a.createElement(m.c[r].icon),l=Object(m.b)(a),d="dialogs"===l&&n>0?Object(E.jsx)(y.a,{count:n}):void 0;return Object(E.jsx)(w,{to:"/"+l,primary:c,secondary:d,icon:u,selected:s===a,onClick:function(){var t;t=a,e.onMenuClick(),o(t)}},l)}));return Object(E.jsx)("div",{className:p.a.drawerContainer,children:Object(E.jsx)(O.a,{children:u})})},k=n(9),I=n.n(k),C=n(18),P=n(28),L=n(55),D=n(87),T={id:null,email:null,login:null,isAuth:!1,isFetching:!1,captchaUrl:null},A=function(e,t,n,r){return{type:"SN/AUTH/SET_AUTH",data:{id:e,email:t,login:n,isAuth:r}}},_=function(e){return{type:"SN/AUTH/GET_CAPTCHA_SUCCESS",url:e}},F=function(){return function(){var e=Object(C.a)(I.a.mark((function e(t){var n,r,a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.Auth.Me();case 2:if(null!==(n=e.sent)){e.next=5;break}return e.abrupt("return");case 5:r=n.id,a=n.email,c=n.login,t(A(r,a,c,!0));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=function(){return function(){var e=Object(C.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.Security.getCaptcha();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:t(_(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/AUTH/SET_AUTH":return Object(d.a)(Object(d.a)({},e),t.data);case"SN/AUTH/GET_CAPTCHA_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{captchaUrl:t.url});default:return e}},W=n(77),U=n(37),G={initDone:!1},H=function(){return{type:"SN/APP/SET_INIT_DONE"}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/APP/SET_INIT_DONE":return Object(d.a)(Object(d.a)({},e),{},{initDone:!0});default:return e}},V=n(78),J=n(117),B=n.n(J),q=n.p+"static/media/logo.6ce24c58.svg",K=n(81),Y=n(188),Z=n(290),Q=n(160),X=n.n(Q),$=n(159),ee=n.n($),te=n(107),ne=n(289),re=n(288),ae=n(186),ce=n(187),ie=Object(ae.a)((function(e){return Object(ce.a)({loginBlock:{display:"flex",alignItems:"center",marginLeft:e.spacing(1),marginRight:e.spacing(1)},login:Object(d.a)(Object(d.a)({},e.typography.subtitle1),{},{padding:e.spacing(1)}),appBar:{zIndex:e.zIndex.drawer+1},headerContentWrapper:{justifyContent:"space-between"},menuButton:Object(u.a)({},e.breakpoints.up("sm"),{display:"none"}),leftPart:{display:"flex"}})})),se=function(e){var t=ie(),n=Object(v.d)(S.h),r=Object(v.d)(S.l),a=Object(v.d)(S.o),c=Object(v.c)();return Object(E.jsx)(re.a,{position:"fixed",className:t.appBar,children:Object(E.jsxs)(ne.a,{className:t.headerContentWrapper,children:[Object(E.jsxs)("div",{className:t.leftPart,children:[Object(E.jsx)(Z.a,{color:"inherit",edge:"start",className:t.menuButton,onClick:e.onMenuClick,children:Object(E.jsx)(ee.a,{})}),Object(E.jsx)("img",{className:B.a.headerLogo,src:q,alt:"logo"})]}),Object(E.jsx)("div",{children:n?Object(E.jsxs)("div",{className:t.loginBlock,children:[Object(E.jsx)(Y.a,{alt:"Header Avatar",src:(null===a||void 0===a?void 0:a.small)||K.a}),Object(E.jsx)(te.a,{className:t.login,children:r}),Object(E.jsx)(Z.a,{onClick:function(){c(function(){var e=Object(C.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.Auth.Logout();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t(A(null,null,null,!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:Object(E.jsx)(X.a,{})})]}):Object(E.jsx)(b.c,{to:"/login",className:B.a.loginLink,children:"Login"})})]})})},oe=n(300),ue=n(299),le=n(291),de=function(e){return Object(E.jsx)(ue.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:e.isOpen,onClose:function(t,n){"clickaway"!==n&&e.setNotificationOpen(!1)},autoHideDuration:6e3,TransitionComponent:le.a,message:e.text})},fe=n(161),pe=n(162),be=n(182),je=n(181),Oe=n(302),he=n(249),ge=n(296),xe=function(e){var t=Object(ae.a)((function(t){return Object(ce.a)({statusDiv:{display:"flex",maxWidth:e.blockWidth||"auto"},statusInput:{maxWidth:e.blockWidth||"auto",margin:t.spacing(1)},statusText:{overflowWrap:"anywhere",flexGrow:1,whiteSpace:"pre-line"},divider:{maxWidth:e.blockWidth||"auto"}})}))(),n=e.status||"No status",r=Object(c.useState)(!1),a=Object(l.a)(r,2),s=a[0],o=a[1],u=Object(c.useState)(e.status),d=Object(l.a)(u,2),f=d[0],p=d[1];Object(c.useEffect)((function(){p(e.status)}),[e.status]);var b=function(){o(!s),s&&f&&n!==f&&e.updateStatus(f)};return e.statusFetching?Object(E.jsx)(V.a,{notCentered:!0}):s&&e.isOwner?Object(E.jsx)(Oe.a,{title:"Click to empty place to save","aria-label":"save status",placement:"right",children:Object(E.jsx)(he.a,{autoFocus:!0,onBlur:b,onChange:function(e){p(e.target.value)},className:t.statusInput,value:f,multiline:!0})}):Object(E.jsxs)(i.a.Fragment,{children:[Object(E.jsx)("div",{className:t.statusDiv,onClick:b,children:e.isOwner?Object(E.jsx)(Oe.a,{title:"Click to edit","aria-label":"edit status",placement:"right",children:Object(E.jsx)(te.a,{color:"textSecondary",className:t.statusText,children:n})}):Object(E.jsx)(te.a,{color:"textSecondary",className:t.statusText,children:n})}),Object(E.jsx)(ge.a,{className:t.divider})]})},me=n(184),ve=n(164),Se=n.n(ve),ye=n(165),Ee=n.n(ye),we=n(166),Ne=n.n(we),ke=n(167),Ie=n.n(ke),Ce=n(168),Pe=n.n(Ce),Le=n(169),De=n.n(Le),Te=n(170),Ae=n.n(Te);function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Re(e,t){var n=e.title,a=e.titleId,i=Fe(e,["title","titleId"]);return c.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":a},i),n?c.createElement("title",{id:a},n):null,r||(r=c.createElement("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm.25 16.996h-2.134c-1.205 0-1.409-.687-2.401-1.679-.897-.897-1.395-.209-1.374 1.068.006.339-.161.611-.566.611-1.264 0-3.08.178-4.918-1.806-1.883-2.033-3.857-6.111-3.857-6.513 0-.237.196-.344.524-.344h2.17c.574 0 .623.284.783.649.667 1.521 2.265 4.574 2.69 2.87.244-.978.344-3.245-.703-3.44-.594-.11.452-.746 1.968-.746.377 0 .786.041 1.205.137.769.179.771.523.761 1.026-.039 1.903-.269 3.184.233 3.507.479.31 1.739-1.717 2.403-3.281.183-.433.219-.722.734-.722h2.654c1.39 0-.182 1.997-1.383 3.557-.968 1.255-.916 1.28.209 2.324.803.744 1.75 1.76 1.75 2.336.002.272-.21.446-.748.446z"})))}var Me=c.forwardRef(Re),We=(n.p,function(e){var t=e.contactTitle,n=e.contactInfo,r=Object(E.jsx)("div",{});switch(t){case"facebook":r=Object(E.jsx)(Se.a,{});break;case"website":r=Object(E.jsx)(Ee.a,{});break;case"vk":r=Object(E.jsx)(me.a,{component:Me});break;case"twitter":r=Object(E.jsx)(Ne.a,{});break;case"instagram":r=Object(E.jsx)(Ie.a,{});break;case"youtube":r=Object(E.jsx)(Pe.a,{});break;case"github":r=Object(E.jsx)(De.a,{});break;case"mainLink":r=Object(E.jsx)(Ae.a,{})}return Object(E.jsx)(Z.a,{color:"primary",component:"a",rel:"noreferrer",href:n,target:"_blank",children:r})}),Ue=n(297),Ge=Object(ae.a)((function(e){return Object(ce.a)({additionalInfo:{display:"flex",flexDirection:"column","& > div":{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},additionalInfoItem:{marginTop:e.spacing(1)},wrapped:{display:"flex",flexWrap:"wrap"},contacts:{display:"flex",alignItems:"center",width:"100%"}})}));var He=function(e){var t,n=Ge(),r=(t=e.contacts,Object.keys(t).map((function(e){var n=t[e];return n?Object(E.jsx)(We,{contactTitle:e,contactInfo:n},e):null}))),a=!r.every((function(e){return null===e}));return Object(E.jsxs)("div",{className:n.additionalInfo,style:{maxWidth:e.blockWidth},children:[Object(E.jsxs)("div",{className:n.additionalInfoItem,children:[Object(E.jsxs)(te.a,{children:["About Me: ",e.aboutMe||"Empty"]}),Object(E.jsxs)(te.a,{children:["Looking for a job: ",e.lookingForAJob?"Yes":"No"]}),e.lookingForAJob&&Object(E.jsxs)(te.a,{className:n.wrapped,children:["Job description: ",e.lookingForAJobDescription]})]}),a?Object(E.jsxs)("div",{className:n.contacts,children:[Object(E.jsx)("div",{children:Object(E.jsx)(te.a,{children:"Contacts:"})}),Object(E.jsx)("div",{className:n.wrapped,children:r})]}):Object(E.jsx)("div",{className:n.contacts,children:Object(E.jsx)(te.a,{children:"no contacts"})}),e.isOwner&&Object(E.jsx)(Ue.a,{color:"primary",variant:"contained",onClick:e.setEditMode,children:"Edit info"})]})},ze=n(44),Ve=n(243),Je=n(19),Be=n(29),qe=Object(ae.a)((function(e){return Object(ce.a)({additionalInfoRow:{display:"flex",justifyContent:"start",alignItems:"center","& > *":{margin:e.spacing(1)},"& > p":{flexBasis:"92px",textAlign:"end",margin:e.spacing(1)},"& > div":{flexGrow:1,display:"flex"}},stretched:{flexGrow:1},errorText:{color:"red",marginLeft:e.spacing(1)}})})),Ke=function(e){var t=qe(),n=Object(c.useState)(e.checked),r=Object(l.a)(n,2),a=r[0],i=r[1];return Object(E.jsxs)(Ve.a,{variant:"outlined",children:[Object(E.jsxs)("div",{className:t.additionalInfoRow,children:[Object(E.jsx)(te.a,{children:"Full name: "}),Object(Je.c)(t.stretched,"Your name","fullName",Je.b,Object(Be.d)([Be.c])),Object(E.jsx)(ze.a,{name:"fullName"})]}),Object(E.jsxs)("div",{className:t.additionalInfoRow,children:[Object(E.jsx)(te.a,{children:"About me: "}),Object(Je.c)(t.stretched,"Say about you","aboutMe",Je.b,Object(Be.d)([]))]}),Object(E.jsxs)("div",{className:t.additionalInfoRow,children:[Object(E.jsx)(te.a,{children:"Look for job: "}),Object(Je.c)(void 0,void 0,"lookingForAJob",Je.a,Object(Be.d)([]),{checked:a,color:"primary",onChange:function(t){e.triggerCheckbox(),i(t.target.checked)}})]}),Object(E.jsx)("div",{className:t.errorText,children:Object(E.jsx)(ze.a,{name:"lookingForAJob"})}),Object(E.jsxs)("div",{className:t.additionalInfoRow,children:[Object(E.jsx)(te.a,{children:"Skills: "}),Object(Je.c)(t.stretched,"Say about job or skills","lookingForAJobDescription",Je.b,Object(Be.d)([]),{multiline:!0})]})]})},Ye=function(e){var t=qe();return Object(E.jsx)(Ve.a,{variant:"outlined",children:Object.keys(e.contacts).map((function(e){return Object(E.jsxs)("div",{className:t.additionalInfoRow,children:[Object(E.jsxs)(te.a,{children:[e,":"]}),Object(Je.c)(t.stretched,e+" link with http","contacts."+e,Je.b,Object(Be.d)([]))]},e)}))})},Ze=Object(ae.a)((function(e){return Object(ce.a)({additionalInfoForm:{display:"flex",flexDirection:"column"},buttonsWrapper:{display:"flex",justifyContent:"center","& > *":{margin:e.spacing(1)}},infoWrapper:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(1),flexGrow:1,flexBasis:"460px"}},statusText:{color:"red",marginLeft:e.spacing(1)},errorsWrapper:{display:"flex",justifyContent:"center"}})}));var Qe=function(e){var t=Ze(),n=Object(v.c)(),r=e.profile;r.contacts=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=e[t]||"");return e}(r.contacts);var a=Object(ze.d)({initialValues:e.profile,enableReinitialize:!0,onSubmit:function(e,t){return c.apply(this,arguments)}});function c(){return(c=Object(C.a)(I.a.mark((function t(r,c){var i,s,o,u;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.setSubmitting,s=c.setFieldError,o=c.setStatus,u="",t.prev=2,t.next=5,n(Object(U.g)(r,s,o));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),u=t.t0;case 10:return t.prev=10,i(!1),t.finish(10);case 13:!u&&a.submitCount>0&&e.onChancel();case 14:case"end":return t.stop()}}),t,null,[[2,7,10,13]])})))).apply(this,arguments)}return Object(E.jsx)("form",{className:t.additionalInfoForm,onSubmit:a.handleSubmit,children:Object(E.jsxs)(ze.c,{value:a,children:[Object(E.jsxs)("div",{className:t.infoWrapper,children:[Object(E.jsx)(Ke,{checked:e.profile.lookingForAJob,triggerCheckbox:function(){a.setFieldValue("lookingForAJob",!a.values.lookingForAJob)}}),Object(E.jsx)(Ye,{contacts:e.profile.contacts})]}),Object(E.jsx)("div",{className:t.errorsWrapper,children:Object(E.jsx)("div",{className:t.statusText,children:a.status})}),Object(E.jsxs)("div",{className:t.buttonsWrapper,children:[Object(E.jsx)(Ue.a,{color:"primary",variant:"contained",type:"submit",disabled:a.isSubmitting||!a.isValid||!a.dirty,children:"Save"}),Object(E.jsx)(Ue.a,{color:"secondary",variant:"contained",onClick:e.onChancel,children:"Cancel"})]})]})})},Xe=n(173),$e=n.n(Xe),et=Object(ae.a)((function(){return Object(ce.a)({input:{display:"none"},label:{display:"flex",justifyContent:"center"}})})),tt=function(){var e=Object(v.c)(),t=et();return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("input",{className:t.input,accept:"image/*",type:"file",id:"icon-button-file",onChange:function(t){t.target.files&&e(Object(U.f)(t.target.files[0]))}}),Object(E.jsx)("label",{htmlFor:"icon-button-file",className:t.label,children:Object(E.jsx)(Ue.a,{variant:"contained",color:"primary",component:"span",startIcon:Object(E.jsx)($e.a,{}),children:"Upload"})})]})},nt=function(e){var t=Object(j.g)(),n=Object(v.c)();return Object(E.jsx)(Ue.a,{variant:"contained",color:"primary",onClick:function(){n(Object(W.g)(e.userId)),t.push("/".concat(Object(m.b)(m.c.dialogs.id),"/").concat(e.userId))},children:"Start dialog"})},rt=Object(ae.a)((function(e){return Object(ce.a)({avatarWrapper:{display:"flex",flexDirection:"column","& > *":{margin:e.spacing(1)}},large:{width:e.spacing(38),height:e.spacing(38)}})})),at=function(e){var t=rt(),n=e.largePhoto||K.a;return Object(E.jsxs)("div",{className:t.avatarWrapper,children:[Object(E.jsx)(Y.a,{className:t.large,src:n}),e.isOwner?Object(E.jsx)(tt,{}):Object(E.jsx)(nt,{userId:e.userId})]})},ct=n.p+"static/media/social-network-pattern-background.066f3894.jpg",it="30ch",st=Object(ae.a)((function(e){return Object(ce.a)({wallpaper:{backgroundImage:"".concat("linear-gradient(rgba(255,255,255,.95), rgba(255,255,255,.95))",", url(").concat(ct,")"),backgroundSize:"40%",margin:e.spacing(-3)},profileDescriptionWrapper:{display:"flex",flexDirection:"column",flexGrow:1,margin:e.spacing(0,4)},profileDescription:{display:"flex",flexWrap:"wrap",padding:e.spacing(1)}})})),ot=function(e){var t=st(),n=Object(c.useState)(!1),r=Object(l.a)(n,2),a=r[0],i=r[1];return e.profile?Object(E.jsx)("div",{className:t.wallpaper,children:Object(E.jsxs)("div",{className:t.profileDescription,children:[Object(E.jsx)(at,{largePhoto:e.profile.photos.large,isOwner:e.isOwner,userId:e.profile.userId}),Object(E.jsxs)("div",{className:t.profileDescriptionWrapper,children:[Object(E.jsx)(te.a,{variant:"h4",children:e.profile.fullName}),Object(E.jsx)(xe,{status:e.status,updateStatus:e.updateStatus,statusFetching:e.statusFetching,isOwner:e.isOwner,blockWidth:it}),a?Object(E.jsx)(Qe,{onChancel:function(){return i(!1)},profile:e.profile}):Object(E.jsx)(He,{aboutMe:e.profile.aboutMe,lookingForAJob:e.profile.lookingForAJob,lookingForAJobDescription:e.profile.lookingForAJobDescription,contacts:e.profile.contacts,setEditMode:function(){return i(!0)},isOwner:e.isOwner,blockWidth:it})]})]})}):Object(E.jsx)(V.a,{})},ut=n(121),lt=n(126),dt=n(125),ft="30ch",pt=Object(ae.a)((function(e){return Object(ce.a)({postsList:{width:"100%",maxWidth:ft,backgroundColor:e.palette.background.paper,display:"flex",flexDirection:"column-reverse"},postsTitle:{margin:e.spacing(2,0)},postBlock:{padding:e.spacing(1)}})})),bt=function(e){var t=pt(),n=e.postsData.map((function(t){return Object(E.jsx)(ut.a,{postId:t.id,action:dt.a.textWithLikes(t.text,t.id,t.likes),avatar:e.avatar,userName:e.userName,blockWidth:ft},"MyPost"+t.id)}));return Object(E.jsxs)("div",{className:t.postBlock,children:[Object(E.jsx)(te.a,{variant:"h5",className:t.postsTitle,children:"Posts"}),Object(E.jsx)(lt.a,{blockWidth:ft,sendMessage:U.e.sendPost,buttonText:"Add Post",minTextLength:2,maxTextLength:100}),Object(E.jsx)(O.a,{className:t.postsList,children:n})]})},jt=Object(v.b)((function(e){return{postsData:e.profilePage.postsData,avatar:e.profilePage.profile?e.profilePage.profile.photos.small:"",userName:e.auth.login}}),{})(bt),Ot=function(e){return Object(E.jsxs)("div",{children:[Object(E.jsx)(ot,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,statusFetching:e.statusFetching,isOwner:e.isOwner}),Object(E.jsx)(jt,{})]})},ht=n(123),gt=function(e){Object(be.a)(n,e);var t=Object(je.a)(n);function n(){return Object(fe.a)(this,n),t.apply(this,arguments)}return Object(pe.a)(n,[{key:"getProfileData",value:function(){this.props.getProfile(parseInt(this.props.match.params.userId)),this.props.getStatus(parseInt(this.props.match.params.userId))}},{key:"componentDidMount",value:function(){this.getProfileData()}},{key:"componentDidUpdate",value:function(e,t,n){e.match.params.userId!==this.props.match.params.userId&&this.getProfileData()}},{key:"render",value:function(){return Object(E.jsx)(Ot,Object(d.a)(Object(d.a)({},this.props),{},{isOwner:!this.props.match.params.userId}))}}]),n}(i.a.Component),xt={getProfile:U.c,getStatus:U.d,updateStatus:U.h},mt=Object(v.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,statusFetching:e.profilePage.statusFetching}}),xt)(Object(j.h)(Object(ht.a)(gt))),vt=Object(Be.a)(30),St=Object(ae.a)((function(e){return Object(ce.a)({loginForm:{display:"flex",flexDirection:"column",width:"20ch",margin:e.spacing(1),"& > *":{display:"flex"}},checkboxWrapper:{alignItems:"center"},loginInput:{flexGrow:1,margin:e.spacing(1)},errorText:{color:"red",alignSelf:"center",marginBottom:e.spacing(1)}})})),yt=function(e){var t=Object(v.c)(),n=St(),r=Object(ze.d)({initialValues:{login:"",password:"",rememberMe:!1,captcha:""},onSubmit:function(e,n){var a=n.setSubmitting;t(function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:D.b;return function(){var c=Object(C.a)(I.a.mark((function c(i){var s;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,P.a.Auth.Login(e,t,n,r);case 2:if(!(s=c.sent).error){c.next=8;break}if(s.resultCode!==L.a.captchaRequired){c.next=7;break}return c.next=7,i(R());case 7:return c.abrupt("return",a(s.error));case 8:return c.next=10,i(F());case 10:i(_(null));case 11:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(e.login,e.password,e.rememberMe,e.captcha,r.setStatus)),a(!1)}});return Object(E.jsxs)("form",{className:n.loginForm,onSubmit:r.handleSubmit,children:[Object(E.jsxs)(ze.c,{value:r,children:[Object(Je.c)(n.loginInput,"Enter login","login",Je.b,Object(Be.d)([Be.c,vt])),Object(Je.c)(n.loginInput,"Enter password","password",Je.b,Object(Be.d)([Be.c,vt]),{type:"password"}),Object(E.jsxs)("div",{className:n.checkboxWrapper,children:[Object(Je.c)(void 0,void 0,"rememberMe",Je.a,Object(Be.d)([]),{color:"primary"}),Object(E.jsx)("span",{children:"remember me"})]}),e.captchaUrl&&Object(E.jsx)("img",{alt:"captcha",src:e.captchaUrl}),e.captchaUrl&&Object(Je.c)(n.loginInput,"Enter symbols from image","captcha",Je.b,Object(Be.d)([Be.c,vt]),{autoComplete:"off"})]}),r.status&&Object(E.jsx)("div",{className:n.errorText,children:r.status}),Object(E.jsx)(Ue.a,{variant:"contained",color:"primary",type:"submit",disabled:r.isSubmitting||!r.isValid,children:"Login"})]})},Et=Object(ae.a)((function(){return Object(ce.a)({loginPage:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"80vh"}})})),wt=function(){var e=Et(),t=Object(v.d)(S.h),n=Object(v.d)(S.b);return t?Object(E.jsx)(j.a,{to:"/profile"}):Object(E.jsxs)("div",{className:e.loginPage,children:[Object(E.jsx)(te.a,{variant:"h4",children:"Login"}),Object(E.jsx)(yt,{captchaUrl:n})]})},Nt=function(){return Object(E.jsx)("div",{children:"404 Not Found"})},kt=n(298),It=Object(ae.a)((function(){return Object(ce.a)({fallbackWrapper:{display:"flex",flexDirection:"column"},fallbackText:{display:"flex",flexBasis:"80vh",alignItems:"center",justifyContent:"center"}})})),Ct=function(){var e=It();return Object(E.jsx)("div",{className:e.fallbackWrapper,children:Object(E.jsx)(kt.a,{className:e.fallbackText,children:Object(E.jsx)(te.a,{color:"textSecondary",variant:"h3",children:"Loading..."})})})},Pt=function(){return Object(E.jsx)(j.a,{to:"/profile"})},Lt=i.a.lazy((function(){return n.e(8).then(n.bind(null,312))})),Dt=i.a.lazy((function(){return n.e(6).then(n.bind(null,313))})),Tt=i.a.lazy((function(){return n.e(7).then(n.bind(null,314))})),At=i.a.lazy((function(){return n.e(3).then(n.bind(null,315))})),_t=i.a.lazy((function(){return n.e(4).then(n.bind(null,316))})),Ft=i.a.lazy((function(){return n.e(5).then(n.bind(null,317))})),Rt=function(){var e=Object(ae.a)((function(e){return Object(ce.a)({content:{flexGrow:1,width:330,padding:e.spacing(3)}})}))();return Object(E.jsxs)("main",{className:e.content,children:[Object(E.jsx)(ne.a,{}),Object(E.jsx)(i.a.Suspense,{fallback:Object(E.jsx)(Ct,{}),children:Object(E.jsxs)(j.d,{children:[Object(E.jsx)(j.b,{exact:!0,path:"/",component:Pt}),Object(E.jsx)(j.b,{path:"/"+Object(m.b)(m.c.profile.id)+"/:userId?",component:function(){return Object(E.jsx)(mt,{})}}),Object(E.jsx)(j.b,{path:"/"+Object(m.b)(m.c.dialogs.id)+"/:userId?",component:function(){return Object(E.jsx)(_t,{})}}),Object(E.jsx)(j.b,{path:"/"+Object(m.b)(m.c.news.id),component:Tt}),Object(E.jsx)(j.b,{path:"/"+Object(m.b)(m.c.music.id),component:Dt}),Object(E.jsx)(j.b,{path:"/"+Object(m.b)(m.c.users.id),component:At}),Object(E.jsx)(j.b,{path:"/"+Object(m.b)(m.c.settings.id),component:Lt}),Object(E.jsx)(j.b,{path:"/"+Object(m.b)(m.c.chat.id),component:Ft}),Object(E.jsx)(j.b,{path:"/login",component:wt}),Object(E.jsx)(j.b,{path:"*",component:Nt})]})})]})},Mt=function(){var e=Object(v.c)(),t=Object(v.d)(S.a),n=i.a.useState(!1),r=Object(l.a)(n,2),a=r[0],c=r[1],s=i.a.useState(""),o=Object(l.a)(s,2),d=o[0],f=o[1],p=i.a.useState(!1),b=Object(l.a)(p,2),j=b[0],O=b[1],h=Object(ae.a)((function(e){var t;return Object(ce.a)({root:{display:"flex"},drawer:(t={width:240},Object(u.a)(t,e.breakpoints.down("md"),{width:e.spacing(7)+1}),Object(u.a)(t,e.breakpoints.down("xs"),{display:j?"":"none"}),Object(u.a)(t,"flexShrink",0),t),drawerPaper:Object(u.a)({width:240},e.breakpoints.down("md"),{width:e.spacing(7)+1})})})),g=function(e){var t=e.reason.response;f(t?"ERROR: server returned "+t.status+" "+t.statusText:"ERROR: server is not respond!"),c(!0)};i.a.useEffect((function(){return window.addEventListener("unhandledrejection",g),e(function(){var e=Object(C.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(F());case 3:return e.next=5,t(Object(W.e)());case 5:return e.next=7,t(Object(U.b)());case 7:return e.prev=7,t(H()),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[0,,7,10]])})));return function(t){return e.apply(this,arguments)}}()),function(){window.removeEventListener("unhandledrejection",g)}}),[]);var x=h();if(!t)return Object(E.jsx)(V.a,{});function m(){O(!j)}return Object(E.jsxs)("div",{className:x.root,children:[Object(E.jsx)(de,{isOpen:a,text:d,setNotificationOpen:c}),Object(E.jsx)(se,{onMenuClick:m}),Object(E.jsxs)(oe.a,{className:x.drawer,variant:"permanent",classes:{paper:x.drawerPaper},children:[Object(E.jsx)(ne.a,{}),Object(E.jsx)(N,{onMenuClick:m})]}),Object(E.jsx)(Rt,{})]})},Wt=n(85),Ut=n(124),Gt=n(179),Ht=n(143),zt=Object(Wt.c)({profilePage:U.a,dialogsPage:W.a,usersPage:Ut.a,auth:M,app:z,chat:Ht.a}),Vt=Object(Wt.d)(zt,Object(Wt.a)(Gt.a));o.a.render(Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(b.a,{children:Object(E.jsx)(v.a,{store:Vt,children:Object(E.jsx)(Mt,{})})})}),document.getElementById("root")),a()},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(157),a=n.n(r),c=n(55),i=a.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"4b793204-e0f1-45c5-b96a-007d58f175b3"}}),s={Users:{getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return i.get("users",{params:{count:e,page:t+1,term:n.searchTerm,friend:n.friend}}).then((function(e){return 0===e.data.items.length?null:e.data}))},unfollow:function(e){return i.delete("follow/"+e).then((function(e){return e.data.resultCode===c.b.Success}))},follow:function(e){return i.post("follow/"+e).then((function(e){return e.data.resultCode===c.b.Success}))}},Auth:{Me:function(){return i.get("auth/me/").then((function(e){return e.data.resultCode===c.b.Success?e.data.data:null}))},Login:function(e,t,n,r){return i.post("auth/login/",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data.resultCode===c.b.Success?{result:e.data.data}:{error:e.data.messages.length?e.data.messages[0]:"Unknown error",resultCode:e.data.resultCode||-1}}))},Logout:function(){return i.delete("auth/login/").then((function(e){return e.data.resultCode===c.b.Success}))}},Profile:{getProfile:function(e){return i.get("profile/"+e).then((function(e){return e.data?e.data:null}))},getStatus:function(e){return i.get("profile/status/"+e).then((function(e){return e.data}))},updateStatus:function(e){return i.put("profile/status",{status:e}).then((function(e){return e.data.resultCode===c.b.Success}))},savePhoto:function(e){var t=new FormData;return t.append("image",e),i.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(0===e.data.resultCode)return e.data.data.photos}))},saveProfile:function(e){return i.put("profile",e).then((function(e){if(e.data.resultCode===c.b.Success)return Promise.resolve();var t=e.data.messages.length?e.data.messages:["Unknown error. (unknown)"];return Promise.reject(t)}))}},Security:{getCaptcha:function(){return i.get("security/get-captcha-url").then((function(e){if(e.data)return e.data.url}))}},Dialogs:{getDialogsList:function(){return i.get("dialogs").then((function(e){if(e.data)return e.data}))},startRefreshDialog:function(e){return i.put("dialogs/"+e).then((function(e){return e.data.resultCode===c.b.Success}))},getMessagesList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return i.get("dialogs/"+e+"/messages",{params:{count:n,page:t+1}}).then((function(e){if(!e.data.error)return e.data}))},sendMessage:function(e,t){return i.post("dialogs/"+e+"/messages",{body:t}).then((function(e){if(e.data.resultCode===c.b.Success)return e.data.data.message}))},getNewMessagesCount:function(){return i.get("dialogs/messages/new/count").then((function(e){return e.data}))}}}},29:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));var r=function(e){return function(t){var n="";return e.forEach((function(e){var r=e(t);void 0!==r&&(n=r)})),n}},a=function(e){if(!e)return"Required field"},c=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e)}},i=function(e){return function(t){if(t&&t.length<e)return"Min length is ".concat(e)}}},37:function(e,t,n){"use strict";n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return b})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return g}));var r=n(9),a=n.n(r),c=n(18),i=n(46),s=n(6),o=n(28),u=n(88),l=n(87),d={postsData:[{id:Object(u.a)(),text:"First post!",likes:15},{id:Object(u.a)(),text:"Second post!",likes:20}],profile:null,ownerProfile:null,statusFetching:!1,status:""},f={sendPost:function(e){return{type:"SN/PROFILE/ADD_POST",newPost:e}},deletePost:function(e){return{type:"SN/PROFILE/DELETE_POST",postId:e}},setProfile:function(e){return{type:"SN/PROFILE/SET_PROFILE",profile:e}},setOwnersProfile:function(e){return{type:"SN/PROFILE/SET_OWNER_PROFILE",profile:e}},updateProfile:function(e){return{type:"SN/PROFILE/UPDATE_PROFILE",profile:e}},setStatus:function(e){return{type:"SN/PROFILE/SET_STATUS",status:e}},toggleStatusFetching:function(){return{type:"SN/PROFILE/TOGGLE_STATUS_FETCHING"}},savePhotoSuccess:function(e){return{type:"SN/PROFILE/SAVE_PHOTO_SUCCESS",photos:e}},addLike:function(e){return{type:"SN/PROFILE/ADD_LIKE",postId:e}}},p=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=e||r().auth.id){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,o.a.Profile.getStatus(c);case 5:if(null!==(i=t.sent)){t.next=9;break}return n(f.setStatus("")),t.abrupt("return");case 9:n(f.setStatus(i));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(f.toggleStatusFetching()),t.prev=1,t.next=4,o.a.Profile.updateStatus(e);case 4:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:n(f.setStatus(e)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435!");case 13:n(f.toggleStatusFetching());case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c,i,u,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r().auth.id,i=e||c){t.next=4;break}return t.abrupt("return");case 4:if(u=r().profilePage.ownerProfile,i!==c||null===u){t.next=8;break}return n(f.setProfile(Object(s.a)({},u))),t.abrupt("return");case 8:return t.next=10,o.a.Profile.getProfile(i);case 10:if(null!==(l=t.sent)){t.next=13;break}return t.abrupt("return");case 13:n(f.setProfile(l));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},O=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n().auth.id){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,o.a.Profile.getProfile(r);case 5:if(null!==(c=e.sent)){e.next=8;break}return e.abrupt("return");case 8:t(f.setOwnersProfile(c));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.Profile.savePhoto(e);case 2:if(void 0!==(r=t.sent)){t.next=5;break}return t.abrupt("return");case 5:n(f.savePhotoSuccess(r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.b;return function(r){return o.a.Profile.saveProfile(e).then((function(){return r(f.updateProfile(e)),Promise.resolve()}),(function(e){return Object(l.c)(e,t,n),Promise.reject("formHasErrors")}))}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/PROFILE/ADD_POST":return void 0===t.newPost||""===t.newPost.replace(/\s+/g,"")?e:Object(s.a)(Object(s.a)({},e),{},{postsData:[].concat(Object(i.a)(e.postsData),[{id:Object(u.a)(),text:t.newPost,likes:0}])});case"SN/PROFILE/DELETE_POST":return Object(s.a)(Object(s.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!==t.postId}))});case"SN/PROFILE/SET_PROFILE":return Object(s.a)(Object(s.a)({},e),{},{profile:t.profile});case"SN/PROFILE/SET_OWNER_PROFILE":return Object(s.a)(Object(s.a)({},e),{},{ownerProfile:t.profile});case"SN/PROFILE/UPDATE_PROFILE":var n=Object(s.a)(Object(s.a)(Object(s.a)({},e.profile),t.profile),{},{contacts:Object(s.a)(Object(s.a)({},e.profile.contacts),t.profile.contacts)});return Object(s.a)(Object(s.a)({},e),{},{profile:n,ownerProfile:n});case"SN/PROFILE/SET_STATUS":return Object(s.a)(Object(s.a)({},e),{},{status:t.status});case"SN/PROFILE/TOGGLE_STATUS_FETCHING":return Object(s.a)(Object(s.a)({},e),{},{statusFetching:!e.statusFetching});case"SN/PROFILE/SAVE_PHOTO_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{profile:Object(s.a)(Object(s.a)({},e.profile),{},{photos:t.photos}),ownerProfile:Object(s.a)(Object(s.a)({},e.ownerProfile),{},{photos:t.photos})});case"SN/PROFILE/ADD_LIKE":return Object(s.a)(Object(s.a)({},e),{},{postsData:e.postsData.map((function(e){return e.id===t.postId?Object(s.a)(Object(s.a)({},e),{},{likes:e.likes+1}):e}))});default:return e}}},55:function(e,t,n){"use strict";var r,a;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r||(r={})),function(e){e[e.captchaRequired=10]="captchaRequired"}(a||(a={}))},57:function(e,t,n){"use strict";function r(e){return e.usersPage.users}function a(e){return e.usersPage.isUsersFetching}function c(e){return e.usersPage.followingInProgress}function i(e){return e.usersPage.filter}function s(e){return e.auth.isAuth}function o(e){return e.auth.captchaUrl}function u(e){return e.auth.login}function l(e){return e.auth.id}function d(e){return e.chat.messages}function f(e){return e.chat.isConnected}function p(e){return e.dialogsPage.messageList}function b(e){return e.dialogsPage.userList}function j(e){return e.dialogsPage.newMessagesCount}function O(e){return e.dialogsPage.currentDialogHasMore}function h(e){return e.dialogsPage.isDialogsFetching}function g(e){return e.app.initDone}function x(e){var t;return null===(t=e.profilePage.ownerProfile)||void 0===t?void 0:t.photos}n.d(t,"q",(function(){return r})),n.d(t,"k",(function(){return a})),n.d(t,"g",(function(){return c})),n.d(t,"p",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"l",(function(){return u})),n.d(t,"n",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"m",(function(){return j})),n.d(t,"d",(function(){return O})),n.d(t,"j",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"o",(function(){return x}))},69:function(e,t,n){e.exports={textWithIconWrapper:"PostActions_textWithIconWrapper__2-gBR",secondRow:"PostActions_secondRow__12p0J",icon:"PostActions_icon__3y829"}},77:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return b})),n.d(t,"g",(function(){return j})),n.d(t,"d",(function(){return O})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return g}));var r=n(9),a=n.n(r),c=n(18),i=n(46),s=n(6),o=n(28),u=n(158),l=n.n(u),d={userList:[],messageList:[],currentDialogId:0,currentDialogPage:0,currentDialogHasMore:!1,newMessagesCount:0,isDialogsFetching:!1};function f(e){return e.map((function(e){var t=Object(s.a)({},e);return t.body=l.a.unescape(e.body),t.body=t.body.replace(/<br \/>/g,"\n"),t}))}var p={messageSent:function(e){return{type:"SN/DIALOGS/MESSAGE_SENT",newMessage:e}},dialogsListReceived:function(e){return{type:"SN/DIALOGS/DIALOGS_LIST_RECEIVED",payload:e}},messagesListReceived:function(e){return{type:"SN/DIALOGS/MESSAGES_LIST_RECEIVED",payload:e}},chatChanged:function(e){return{type:"SN/DIALOGS/CHAT_CHANGED",payload:e}},chatMessagesRead:function(e){return{type:"SN/DIALOGS/CHAT_MESSAGES_READ",payload:e}},newMessagesCountReceived:function(e){return{type:"SN/DIALOGS/NEW_MESSAGES_COUNT_RECEIVED",payload:e}},countMessagesChanged:function(e){return{type:"SN/DIALOGS/COUNT_MESSAGES_CHANGED",payload:e}},updateDialogsFetching:function(e){return{type:"SN/DIALOGS/UPDATE_IS_DIALOGS_FETCHING",payload:e}}},b=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(p.updateDialogsFetching(!0)),e.next=3,o.a.Dialogs.getDialogsList();case 3:if((n=e.sent)&&n.length){e.next=7;break}return t(p.dialogsListReceived([])),e.abrupt("return");case 7:t(p.dialogsListReceived(n)),t(p.updateDialogsFetching(!1));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.Dialogs.startRefreshDialog(e);case 2:if(!t.sent){t.next=6;break}return t.next=6,n(b());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r().dialogsPage,t.next=3,o.a.Dialogs.getMessagesList(e,c.currentDialogPage);case 3:if(i=t.sent){t.next=6;break}return t.abrupt("return");case 6:n(p.messagesListReceived(i.items)),n(p.countMessagesChanged(i.totalCount));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r().dialogsPage.currentDialogId,t.next=3,o.a.Dialogs.sendMessage(c,e);case 3:if(i=t.sent){t.next=6;break}return t.abrupt("return");case 6:n(p.messageSent(i));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},g=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n().auth.isAuth){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,o.a.Dialogs.getNewMessagesCount();case 5:r=e.sent,t(p.newMessagesCountReceived(r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/DIALOGS/MESSAGE_SENT":return Object(s.a)(Object(s.a)({},e),{},{messageList:[].concat(Object(i.a)(e.messageList),[Object(s.a)({},t.newMessage)])});case"SN/DIALOGS/DIALOGS_LIST_RECEIVED":return Object(s.a)(Object(s.a)({},e),{},{userList:Object(i.a)(t.payload)});case"SN/DIALOGS/MESSAGES_LIST_RECEIVED":return Object(s.a)(Object(s.a)({},e),{},{messageList:[].concat(Object(i.a)(f(t.payload)),Object(i.a)(e.messageList)),currentDialogPage:e.currentDialogPage+1});case"SN/DIALOGS/CHAT_CHANGED":return Object(s.a)(Object(s.a)({},e),{},{currentDialogId:t.payload,messageList:[],currentDialogPage:0,currentDialogHasMore:!1});case"SN/DIALOGS/NEW_MESSAGES_COUNT_RECEIVED":return Object(s.a)(Object(s.a)({},e),{},{newMessagesCount:t.payload});case"SN/DIALOGS/CHAT_MESSAGES_READ":var n=0;return Object(s.a)(Object(s.a)({},e),{},{userList:e.userList.map((function(e){return t.payload===e.id&&(n=e.newMessagesCount,e.newMessagesCount=0,e.hasNewMessages=!1),e})),newMessagesCount:e.newMessagesCount>=n?e.newMessagesCount-n:0});case"SN/DIALOGS/COUNT_MESSAGES_CHANGED":return Object(s.a)(Object(s.a)({},e),{},{currentDialogHasMore:t.payload>e.messageList.length});case"SN/DIALOGS/UPDATE_IS_DIALOGS_FETCHING":return Object(s.a)(Object(s.a)({},e),{},{isDialogsFetching:t.payload});default:return e}}},78:function(e,t,n){"use strict";n(0);var r=n(116),a=n.n(r),c=n.p+"static/media/preloader-spinner.635e13f4.svg",i=n(2);t.a=function(e){return Object(i.jsx)("div",{className:e.notCentered?void 0:a.a.preloaderWrapper,children:Object(i.jsx)("img",{alt:"preloader",className:a.a.preloader,src:c})})}},81:function(e,t,n){"use strict";t.a=n.p+"static/media/user-male.ba3e9327.png"},87:function(e,t,n){"use strict";function r(e,t){}function a(e){}function c(e,t,n){e.forEach((function(e){var r,a,c,i,s=e.split("(")[1];-1!==s.indexOf("->")?(r=s.split("->")[0].toLowerCase(),a=s.substring(0,s.length-1).split("->")[1].toLowerCase(),i=(c=e.split("(")[0]).substring(0,c.length-1),t("".concat(r,".").concat(a),i)):(r=s.substring(0,s.length-1),i=(c=e.split("(")[0]).substring(0,c.length-1),"contacts"===r&&n(i),t(r,i))}))}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c}))}},[[237,1,2]]]);
//# sourceMappingURL=main.fd5a2c59.chunk.js.map